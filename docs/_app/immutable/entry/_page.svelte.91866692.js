import{S as ve,i as ye,s as we,k as y,a as P,q as W,l as w,m as b,h as m,c as L,r as G,n as g,b as j,C as d,P as qt,E as ce,F as le,I as Oe,J as Ge,D as Ce,o as et,Q as _t,u as ze,K as mt,R as gt,T as tt,U as Ht,V as Qe,W as xt,X as es,G as ie,v as Te,d as A,f as Se,g as z,Y as ts,Z as ss,e as Fe,_ as ns,x as vt,y as X,z as ee,A as Q,$ as rs,a0 as ls,B as Z,a1 as os,a2 as yt,a3 as as,a4 as is,a5 as cs,a6 as Ft,a7 as us,a8 as fs,a9 as hs,aa as ps,ab as wt,ac as bt}from"../chunks/index.60eb75e0.js";import{c as Wt,h as Gt,a as ds,d as _s,s as ms,S as gs,o as Jt,v as vs,b as ys,M as ws,e as bs,f as Es}from"../chunks/version.bd804bb2.js";import{p as $s}from"../chunks/stores.fce34765.js";import{b as Yt,w as Kt}from"../chunks/paths.564ac200.js";import{w as ks,s as He,I as st,c as Et}from"../chunks/copy-main.84117280.js";let Le;const nt=()=>{if(Le!==void 0)return Le;try{const n=window.localStorage,e="__storage_test__";n.setItem(e,e),n.removeItem(e),Le=!0}catch{Le=!1}finally{return Le}},Is=n=>{if(nt())try{localStorage.removeItem(n)}catch(e){console.log(e)}},Ts=(n,e)=>{if(nt())try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.log(t)}},Ss=n=>{if(nt())try{return JSON.parse(localStorage.getItem(n))}catch(e){console.log(e);return}},$t={set:Ts,get:Ss,remove:Is};async function Cs({lat:n,lon:e,state:t}){try{const r=(await Wt(`${Yt}/assets/coordinates/${t}.csv?2023-03-16-13:22`)).map(l=>({...l,state:t,dist:Gt([+e,+n],[+l.longitude,+l.latitude])}));return r.sort((l,c)=>ds(l.dist,c.dist)),r.slice(0,5)}catch(s){console.log(s);return}}async function Ms({counties:n,location:e}){const{lon:t,lat:s}=e,l=n.features.map(({id:o,properties:a})=>({id:o,...a})).map(o=>({...o,dist:Math.round(Gt([+t,+s],o.centroid)/1e3)}));return l.sort((o,a)=>_s(o.dist,a.dist)),l.reverse(),l.map((o,a)=>({...o,index:a}))}const Ds={testing:"This is localhost testing data",city:"Lee",country:"US",hostname:"cpe-74-76-154-164.nycap.res.rr.com",ip:"74.76.154.164",loc:"42.3043,-73.2482",org:"AS11351 Charter Communications Inc",postal:"01238",region:"Massachusetts",timezone:"America/New_York"},Ps=4e3;async function Ls(n){if(n)return Promise.resolve(Ds);try{return await(await fetch("https://ipinfo.io/json?token=6f0f9c88db028a")).json()}catch(e){throw new Error(e)}}function Os(n=!1){return new Promise((e,t)=>{const s=setTimeout(()=>t(new Error("timeout")),Ps);Ls(n).then(r=>{clearTimeout(s),e(r)}).catch(t)})}async function zs(n){var t;let e;try{const{country:s,region:r,loc:l}=await Os(n);if(s==="US"){const[c,o]=l.split(","),a=(t=ms.find(i=>i.state===r))==null?void 0:t.postal;e={lat:c,lon:o,state:a}}}catch(s){console.log(s)}finally{return e}}function As(n,e={}){let t;const s=l=>{const c=l[0].isIntersecting,o=c?"enter":"exit";if(n.dispatchEvent(new CustomEvent(o)),e.progress&&c){const i={ratio:l[0].intersectionRatio};n.dispatchEvent(new CustomEvent("progress",{detail:i}))}},r=({root:l,top:c,bottom:o})=>{const a=c?c*-1:0,i=o?o*-1:0,h=`${a}px 0px ${i}px 0px`,u={root:l,rootMargin:h};t&&t.disconnect(),t=new IntersectionObserver(s,u),t.observe(n)};return r(e),{update(l){r(l)},destroy(){t&&t.disconnect()}}}function kt(n,e,t){const s=n.slice();return s[8]=e[t],s}function It(n,e,t){const s=n.slice();return s[11]=e[t].hed,s[3]=e[t].url,s[12]=e[t].image,s}function Tt(n){let e,t,s,r,l,c,o=n[11]+"",a,i,h;return{c(){e=y("div"),t=y("a"),s=y("img"),l=P(),c=y("span"),a=W(o),h=P(),this.h()},l(u){e=w(u,"DIV",{class:!0});var f=b(e);t=w(f,"A",{href:!0,class:!0});var _=b(t);s=w(_,"IMG",{src:!0,alt:!0}),l=L(_),c=w(_,"SPAN",{class:!0});var p=b(c);a=G(p,o),p.forEach(m),_.forEach(m),h=L(f),f.forEach(m),this.h()},h(){_t(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+n[12]+".jpg")||g(s,"src",r),g(s,"alt","thumbnail"),g(c,"class","svelte-13ez18p"),g(t,"href",i="https://pudding.cool/"+n[3]),g(t,"class","svelte-13ez18p"),g(e,"class","story svelte-13ez18p")},m(u,f){j(u,e,f),d(e,t),d(t,s),d(t,l),d(t,c),d(c,a),d(e,h)},p(u,f){f&1&&!_t(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+u[12]+".jpg")&&g(s,"src",r),f&1&&o!==(o=u[11]+"")&&ze(a,o),f&1&&i!==(i="https://pudding.cool/"+u[3])&&g(t,"href",i)},d(u){u&&m(e)}}}function St(n){let e,t,s,r=n[8].name.toUpperCase()+"",l,c;return{c(){e=y("li"),t=y("a"),s=y("span"),l=W(r),c=P(),this.h()},l(o){e=w(o,"LI",{class:!0});var a=b(e);t=w(a,"A",{href:!0,class:!0});var i=b(t);s=w(i,"SPAN",{class:!0});var h=b(s);l=G(h,r),h.forEach(m),i.forEach(m),c=L(a),a.forEach(m),this.h()},h(){g(s,"class","svelte-13ez18p"),g(t,"href",n[8].url),g(t,"class","svelte-13ez18p"),g(e,"class","svelte-13ez18p")},m(o,a){j(o,e,a),d(e,t),d(t,s),d(s,l),d(e,c)},p:le,d(o){o&&m(e)}}}function Ns(n){let e,t,s,r,l,c,o,a,i,h,u,f,_,p,E,T=n[0],k=[];for(let C=0;C<T.length;C+=1)k[C]=Tt(It(n,T,C));let I=n[2],S=[];for(let C=0;C<I.length;C+=1)S[C]=St(kt(n,I,C));return{c(){e=y("footer"),t=y("section");for(let C=0;C<k.length;C+=1)k[C].c();s=P(),r=y("section"),l=y("div"),c=P(),o=y("p"),a=y("a"),i=W("The Pudding"),h=W(`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),u=P(),f=y("section"),_=y("ul");for(let C=0;C<S.length;C+=1)S[C].c();this.h()},l(C){e=w(C,"FOOTER",{class:!0});var N=b(e);t=w(N,"SECTION",{class:!0});var $=b(t);for(let te=0;te<k.length;te+=1)k[te].l($);$.forEach(m),s=L(N),r=w(N,"SECTION",{class:!0});var U=b(r);l=w(U,"DIV",{class:!0});var oe=b(l);oe.forEach(m),c=L(U),o=w(U,"P",{});var Y=b(o);a=w(Y,"A",{href:!0,class:!0});var ue=b(a);i=G(ue,"The Pudding"),ue.forEach(m),h=G(Y,`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),Y.forEach(m),U.forEach(m),u=L(N),f=w(N,"SECTION",{class:!0});var x=b(f);_=w(x,"UL",{class:!0});var ae=b(_);for(let te=0;te<S.length;te+=1)S[te].l(ae);ae.forEach(m),x.forEach(m),N.forEach(m),this.h()},h(){g(t,"class","stories svelte-13ez18p"),g(l,"class","wordmark svelte-13ez18p"),g(a,"href","https://pudding.cool"),g(a,"class","svelte-13ez18p"),g(r,"class","about svelte-13ez18p"),g(_,"class","svelte-13ez18p"),g(f,"class","links svelte-13ez18p"),g(e,"class","svelte-13ez18p")},m(C,N){j(C,e,N),d(e,t);for(let $=0;$<k.length;$+=1)k[$]&&k[$].m(t,null);d(e,s),d(e,r),d(r,l),l.innerHTML=ks,d(r,c),d(r,o),d(o,a),d(a,i),d(o,h),d(e,u),d(e,f),d(f,_);for(let $=0;$<S.length;$+=1)S[$]&&S[$].m(_,null);p||(E=[qt(As.call(null,e)),ce(e,"enter",n[4]),ce(e,"exit",n[5])],p=!0)},p(C,[N]){if(N&1){T=C[0];let $;for($=0;$<T.length;$+=1){const U=It(C,T,$);k[$]?k[$].p(U,N):(k[$]=Tt(U),k[$].c(),k[$].m(t,null))}for(;$<k.length;$+=1)k[$].d(1);k.length=T.length}if(N&4){I=C[2];let $;for($=0;$<I.length;$+=1){const U=kt(C,I,$);S[$]?S[$].p(U,N):(S[$]=St(U),S[$].c(),S[$].m(_,null))}for(;$<S.length;$+=1)S[$].d(1);S.length=I.length}},i:le,o:le,d(C){C&&m(e),Oe(k,C),Oe(S,C),p=!1,Ge(E)}}}function Us(n,e,t){let s;Ce(n,He,u=>t(1,s=u));let r,l=[];const o=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,a=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return et(async()=>{r=window.location.href;const f=await(await fetch(o)).json();t(0,l=f.filter(_=>!r.includes(_.url)).slice(0,4))}),[l,s,a,o,()=>mt(He,s=!1,s),()=>mt(He,s=!0,s)]}class Vs extends ve{constructor(e){super(),ye(this,e,Us,Ns,we,{})}}function Xt(n){const e=n-1;return e*e*e+1}function js(n,{delay:e=0,duration:t=400,easing:s=tt}={}){const r=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:l=>`opacity: ${l*r}`}}function Rs(n,{delay:e=0,duration:t=400,easing:s=Xt,x:r=0,y:l=0,opacity:c=0}={}){const o=getComputedStyle(n),a=+o.opacity,i=o.transform==="none"?"":o.transform,h=a*(1-c),[u,f]=gt(r),[_,p]=gt(l);return{delay:e,duration:t,easing:s,css:(E,T)=>`
			transform: ${i} translate(${(1-E)*u}${f}, ${(1-E)*_}${p});
			opacity: ${a-h*T}`}}function Bs(n,{from:e,to:t},s={}){const r=getComputedStyle(n),l=r.transform==="none"?"":r.transform,[c,o]=r.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*c/t.width-(t.left+c),i=e.top+e.height*o/t.height-(t.top+o),{delay:h=0,duration:u=_=>Math.sqrt(_)*120,easing:f=Xt}=s;return{delay:h,duration:Ht(u)?u(Math.sqrt(a*a+i*i)):u,easing:f,css:(_,p)=>{const E=p*a,T=p*i,k=_+p*e.width/t.width,I=_+p*e.height/t.height;return`transform: ${l} translate(${E}px, ${T}px) scale(${k}, ${I});`}}}const qs={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},Hs=()=>{const{subscribe:n,update:e}=Kt([]),t={};let s=0;function r(i){return i instanceof Object}function l(i="default",h={}){return t[i]=h,t}function c(i,h){const u={target:"default",...r(i)?i:{...h,msg:i}},f=t[u.target]||{},_={...qs,...f,...u,theme:{...f.theme,...u.theme},classes:[...f.classes||[],...u.classes||[]],id:++s};return e(p=>_.reversed?[...p,_]:[_,...p]),s}function o(i){e(h=>{if(!h.length||i===0)return[];if(typeof i=="function")return h.filter(f=>i(f));if(r(i))return h.filter(f=>f.target!==i.target);const u=i||Math.max(...h.map(f=>f.id));return h.filter(f=>f.id!==u)})}function a(i,h){const u=r(i)?i:{...h,id:i};e(f=>{const _=f.findIndex(p=>p.id===u.id);return _>-1&&(f[_]={...f[_],...u}),f})}return{subscribe:n,push:c,pop:o,set:a,_init:l}},We=Hs();function Ct(n){return Object.prototype.toString.call(n)==="[object Date]"}function Ze(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const s=e.map((r,l)=>Ze(n[l],r));return r=>s.map(l=>l(r))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(Ct(n)&&Ct(e)){n=n.getTime(),e=e.getTime();const l=e-n;return c=>new Date(n+c*l)}const s=Object.keys(e),r={};return s.forEach(l=>{r[l]=Ze(n[l],e[l])}),l=>{const c={};return s.forEach(o=>{c[o]=r[o](l)}),c}}if(t==="number"){const s=e-n;return r=>n+r*s}throw new Error(`Cannot interpolate ${t} values`)}function Fs(n,e={}){const t=Kt(n);let s,r=n;function l(c,o){if(n==null)return t.set(n=c),Promise.resolve();r=c;let a=s,i=!1,{delay:h=0,duration:u=400,easing:f=tt,interpolate:_=Ze}=Qe(Qe({},e),o);if(u===0)return a&&(a.abort(),a=null),t.set(n=r),Promise.resolve();const p=xt()+h;let E;return s=es(T=>{if(T<p)return!0;i||(E=_(n,c),typeof u=="function"&&(u=u(n,c)),i=!0),a&&(a.abort(),a=null);const k=T-p;return k>u?(t.set(n=c),!1):(t.set(n=E(f(k/u))),!0)}),s.promise}return{set:l,update:(c,o)=>l(c(r,n),o),subscribe:t.subscribe}}function Ws(n){let e,t=n[0].msg+"",s;return{c(){e=new ss(!1),s=Fe(),this.h()},l(r){e=ns(r,!1),s=Fe(),this.h()},h(){e.a=s},m(r,l){e.m(t,r,l),j(r,s,l)},p(r,l){l&1&&t!==(t=r[0].msg+"")&&e.p(t)},i:le,o:le,d(r){r&&m(s),r&&e.d()}}}function Gs(n){let e,t,s;const r=[n[2]];var l=n[0].component.src;function c(o){let a={};for(let i=0;i<r.length;i+=1)a=Qe(a,r[i]);return{props:a}}return l&&(e=vt(l,c())),{c(){e&&X(e.$$.fragment),t=Fe()},l(o){e&&ee(e.$$.fragment,o),t=Fe()},m(o,a){e&&Q(e,o,a),j(o,t,a),s=!0},p(o,a){const i=a&4?rs(r,[ls(o[2])]):{};if(a&1&&l!==(l=o[0].component.src)){if(e){Te();const h=e;A(h.$$.fragment,1,0,()=>{Z(h,1)}),Se()}l?(e=vt(l,c()),X(e.$$.fragment),z(e.$$.fragment,1),Q(e,t.parentNode,t)):e=null}else l&&e.$set(i)},i(o){s||(e&&z(e.$$.fragment,o),s=!0)},o(o){e&&A(e.$$.fragment,o),s=!1},d(o){o&&m(t),e&&Z(e,o)}}}function Mt(n){let e,t,s;return{c(){e=y("div"),this.h()},l(r){e=w(r,"DIV",{class:!0,role:!0,tabindex:!0}),b(e).forEach(m),this.h()},h(){g(e,"class","_toastBtn pe svelte-6p19b0"),g(e,"role","button"),g(e,"tabindex","0")},m(r,l){j(r,e,l),t||(s=[ce(e,"click",n[4]),ce(e,"keydown",n[8])],t=!0)},p:le,d(r){r&&m(e),t=!1,Ge(s)}}}function Js(n){let e,t,s,r,l,c,o,a,i,h;const u=[Gs,Ws],f=[];function _(E,T){return E[0].component?0:1}s=_(n),r=f[s]=u[s](n);let p=n[0].dismissable&&Mt(n);return{c(){e=y("div"),t=y("div"),r.c(),l=P(),p&&p.c(),c=P(),o=y("progress"),this.h()},l(E){e=w(E,"DIV",{class:!0});var T=b(e);t=w(T,"DIV",{role:!0,class:!0});var k=b(t);r.l(k),k.forEach(m),l=L(T),p&&p.l(T),c=L(T),o=w(T,"PROGRESS",{class:!0}),b(o).forEach(m),T.forEach(m),this.h()},h(){g(t,"role","status"),g(t,"class","_toastMsg svelte-6p19b0"),ie(t,"pe",n[0].component),g(o,"class","_toastBar svelte-6p19b0"),o.value=n[1],g(e,"class","_toastItem svelte-6p19b0"),ie(e,"pe",n[0].pausable)},m(E,T){j(E,e,T),d(e,t),f[s].m(t,null),d(e,l),p&&p.m(e,null),d(e,c),d(e,o),a=!0,i||(h=[ce(e,"mouseenter",n[9]),ce(e,"mouseleave",n[6])],i=!0)},p(E,[T]){let k=s;s=_(E),s===k?f[s].p(E,T):(Te(),A(f[k],1,1,()=>{f[k]=null}),Se(),r=f[s],r?r.p(E,T):(r=f[s]=u[s](E),r.c()),z(r,1),r.m(t,null)),(!a||T&1)&&ie(t,"pe",E[0].component),E[0].dismissable?p?p.p(E,T):(p=Mt(E),p.c(),p.m(e,c)):p&&(p.d(1),p=null),(!a||T&2)&&(o.value=E[1]),(!a||T&1)&&ie(e,"pe",E[0].pausable)},i(E){a||(z(r),a=!0)},o(E){A(r),a=!1},d(E){E&&m(e),f[s].d(),p&&p.d(),i=!1,Ge(h)}}}function Xe(n,e="undefined"){return typeof n===e}function Ys(n,e,t){let s,{item:r}=e,l=r.initial,c=l,o=!1,a={},i;const h=Fs(r.initial,{duration:r.duration,easing:tt});Ce(n,h,I=>t(1,s=I));function u(){We.pop(r.id)}function f(){(s===1||s===0)&&u()}function _(){!o&&s!==l&&(h.set(s,{duration:0}),o=!0)}function p(){if(o){const I=r.duration,S=I-I*((s-c)/(l-c));h.set(l,{duration:S}).then(f),o=!1}}function E(I=document){if(Xe(I.hidden))return;const S=()=>I.hidden?_():p(),C="visibilitychange";I.addEventListener(C,S),i=()=>I.removeEventListener(C,S),S()}et(E),ts(()=>{Xe(r.onpop,"function")&&r.onpop(r.id),i&&i()});const T=I=>{I instanceof KeyboardEvent&&["Enter"," "].includes(I.key)&&u()},k=()=>{r.pausable&&_()};return n.$$set=I=>{"item"in I&&t(0,r=I.item)},n.$$.update=()=>{if(n.$$.dirty&1&&(Xe(r.progress)||t(0,r.next=r.progress,r)),n.$$.dirty&131&&l!==r.next&&(t(7,l=r.next),c=s,o=!1,h.set(l).then(f)),n.$$.dirty&1&&r.component){const{props:I={},sendIdTo:S}=r.component;t(2,a={...I,...S&&{[S]:r.id}})}},[r,s,a,h,u,_,p,l,T,k]}class Ks extends ve{constructor(e){super(),ye(this,e,Ys,Js,we,{item:0})}}function Dt(n,e,t){const s=n.slice();return s[4]=e[t],s}function Pt(n,e){let t,s,r,l,c,o,a,i,h=le,u;return s=new Ks({props:{item:e[4]}}),{key:n,first:null,c(){t=y("li"),X(s.$$.fragment),r=P(),this.h()},l(f){t=w(f,"LI",{class:!0,style:!0});var _=b(t);ee(s.$$.fragment,_),r=L(_),_.forEach(m),this.h()},h(){g(t,"class",l=yt(e[4].classes.join(" "))+" svelte-1u812xz"),g(t,"style",c=Lt(e[4].theme)),this.first=t},m(f,_){j(f,t,_),Q(s,t,null),d(t,r),u=!0},p(f,_){e=f;const p={};_&1&&(p.item=e[4]),s.$set(p),(!u||_&1&&l!==(l=yt(e[4].classes.join(" "))+" svelte-1u812xz"))&&g(t,"class",l),(!u||_&1&&c!==(c=Lt(e[4].theme)))&&g(t,"style",c)},r(){i=t.getBoundingClientRect()},f(){as(t),h(),is(t,i)},a(){h(),h=cs(t,i,Bs,{duration:200})},i(f){u||(z(s.$$.fragment,f),Ft(()=>{u&&(a&&a.end(1),o=us(t,Rs,e[4].intro),o.start())}),u=!0)},o(f){A(s.$$.fragment,f),o&&o.invalidate(),a=fs(t,js,{}),u=!1},d(f){f&&m(t),Z(s),f&&a&&a.end()}}}function Xs(n){let e,t=[],s=new Map,r,l=n[0];const c=o=>o[4].id;for(let o=0;o<l.length;o+=1){let a=Dt(n,l,o),i=c(a);s.set(i,t[o]=Pt(i,a))}return{c(){e=y("ul");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=w(o,"UL",{class:!0});var a=b(e);for(let i=0;i<t.length;i+=1)t[i].l(a);a.forEach(m),this.h()},h(){g(e,"class","_toastContainer svelte-1u812xz")},m(o,a){j(o,e,a);for(let i=0;i<t.length;i+=1)t[i]&&t[i].m(e,null);r=!0},p(o,[a]){if(a&1){l=o[0],Te();for(let i=0;i<t.length;i+=1)t[i].r();t=os(t,a,c,1,o,l,s,e,hs,Pt,null,Dt);for(let i=0;i<t.length;i+=1)t[i].a();Se()}},i(o){if(!r){for(let a=0;a<l.length;a+=1)z(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)A(t[a]);r=!1},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Lt(n){return Object.keys(n).reduce((e,t)=>`${e}${t}:${n[t]};`,"")}function Qs(n,e,t){let s;Ce(n,We,o=>t(3,s=o));let{options:r={}}=e,{target:l="default"}=e,c=[];return n.$$set=o=>{"options"in o&&t(1,r=o.options),"target"in o&&t(2,l=o.target)},n.$$.update=()=>{n.$$.dirty&6&&We._init(l,r),n.$$.dirty&12&&t(0,c=s.filter(o=>o.target===l))},[c,r,l,s]}class Zs extends ve{constructor(e){super(),ye(this,e,Qs,Xs,we,{options:1,target:2})}}const xs=async n=>{if("clipboard"in navigator)await navigator.clipboard.writeText(n);else{const e=document.createElement("input");e.type="text",e.disabled=!0,e.style.setProperty("position","fixed"),e.style.setProperty("z-index","-100"),e.style.setProperty("pointer-events","none"),e.style.setProperty("opacity","0"),e.value=n,document.body.appendChild(e),e.click(),e.select(),document.execCommand("copy"),document.body.removeChild(e)}},en=(n,e)=>{async function t(){if(r)try{await xs(r),n.dispatchEvent(new CustomEvent("svelte-copy",{detail:r}))}catch(l){n.dispatchEvent(new CustomEvent("svelte-copy:error",{detail:l}))}}let s=typeof e=="string"?["click"]:[e.events].flat(1),r=typeof e=="string"?e:e.text;return s.forEach(l=>{n.addEventListener(l,t,!0)}),{update:l=>{const c=typeof l=="string"?["click"]:[l.events].flat(1),o=typeof l=="string"?l:l.text,a=c.filter(h=>!s.includes(h)),i=s.filter(h=>!c.includes(h));a.forEach(h=>{n.addEventListener(h,t,!0)}),i.forEach(h=>{n.removeEventListener(h,t,!0)}),s=c,r=o},destroy:()=>{s.forEach(l=>{n.removeEventListener(l,t,!0)})}}};function tn(n){let e,t,s,r,l,c,o,a,i,h;return e=new Zs({props:{options:n[2]}}),c=new st({props:{name:"forward",strokeWidth:"3px"}}),{c(){X(e.$$.fragment),t=P(),s=y("div"),r=y("button"),l=W("Share map "),X(c.$$.fragment),this.h()},l(u){ee(e.$$.fragment,u),t=L(u),s=w(u,"DIV",{class:!0});var f=b(s);r=w(f,"BUTTON",{class:!0});var _=b(r);l=G(_,"Share map "),ee(c.$$.fragment,_),_.forEach(m),f.forEach(m),this.h()},h(){g(r,"class","svelte-afq10l"),g(s,"class","share svelte-afq10l"),ie(s,"visible",n[1])},m(u,f){Q(e,u,f),j(u,t,f),j(u,s,f),d(s,r),d(r,l),Q(c,r,null),a=!0,i||(h=[qt(o=en.call(null,r,n[0])),ce(r,"svelte-copy",n[3])],i=!0)},p(u,[f]){o&&Ht(o.update)&&f&1&&o.update.call(null,u[0]),(!a||f&2)&&ie(s,"visible",u[1])},i(u){a||(z(e.$$.fragment,u),z(c.$$.fragment,u),a=!0)},o(u){A(e.$$.fragment,u),A(c.$$.fragment,u),a=!1},d(u){Z(e,u),u&&m(t),u&&m(s),Z(c),i=!1,Ge(h)}}}function sn(n,e,t){let s;Ce(n,He,o=>t(1,s=o));let{url:r}=e;const l={duration:1500,dismissable:!1,intro:{y:32}};function c(){We.push("Link copied!")}return n.$$set=o=>{"url"in o&&t(0,r=o.url)},[r,s,l,c]}class nn extends ve{constructor(e){super(),ye(this,e,sn,tn,we,{url:0})}}function rn(n){let e,t,s,r,l,c;return l=new st({props:{stroke:"white",name:"dollar-sign"}}),{c(){e=y("a"),t=W(n[0]),s=P(),r=y("span"),X(l.$$.fragment),this.h()},l(o){e=w(o,"A",{class:!0,href:!0,target:!0,rel:!0,role:!0});var a=b(e);t=G(a,n[0]),s=L(a),r=w(a,"SPAN",{class:!0});var i=b(r);ee(l.$$.fragment,i),i.forEach(m),a.forEach(m),this.h()},h(){g(r,"class","svelte-423hsz"),g(e,"class","tip-button svelte-423hsz"),g(e,"href",n[1]),g(e,"target","_blank"),g(e,"rel","noreferrer"),g(e,"role","button")},m(o,a){j(o,e,a),d(e,t),d(e,s),d(e,r),Q(l,r,null),c=!0},p(o,[a]){(!c||a&1)&&ze(t,o[0]),(!c||a&2)&&g(e,"href",o[1])},i(o){c||(z(l.$$.fragment,o),c=!0)},o(o){A(l.$$.fragment,o),c=!1},d(o){o&&m(e),Z(l)}}}function ln(n,e,t){let{text:s="Tip"}=e,{href:r}=e;return n.$$set=l=>{"text"in l&&t(0,s=l.text),"href"in l&&t(1,r=l.href)},[s,r]}class on extends ve{constructor(e){super(),ye(this,e,ln,rn,we,{text:0,href:1})}}const xe=[{name:"Portland",phoneme:"4010"},{name:"Paris",phoneme:"3785"},{name:"Pluto",phoneme:"3968"},{name:"Indiana",phoneme:"2418"},{name:"Davie",phoneme:"1263"}];function Ot(n,e,t){const s=n.slice();return s[30]=e[t].value,s}function zt(n,e,t){const s=n.slice();s[33]=e[t];const r=s[33];return s[34]=r.name,s}function At(n,e,t){const s=n.slice();s[33]=e[t];const r=s[33];return s[34]=r.name,s[37]=r.state,s}function Nt(n){let e,t;return e=new st({props:{name:"map-pin",strokeWidth:"3px"}}),{c(){X(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){Q(e,s,r),t=!0},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Ut(n){let e,t,s=n[15].locate+"",r,l,c,o=n[4],a=[];for(let i=0;i<o.length;i+=1)a[i]=Vt(At(n,o,i));return{c(){e=y("div"),t=y("p"),r=W(s),l=P(),c=y("ul");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var h=b(e);t=w(h,"P",{class:!0});var u=b(t);r=G(u,s),u.forEach(m),l=L(h),c=w(h,"UL",{class:!0});var f=b(c);for(let _=0;_<a.length;_+=1)a[_].l(f);f.forEach(m),h.forEach(m),this.h()},h(){g(t,"class","svelte-w1x65a"),g(c,"class","svelte-w1x65a"),g(e,"class","locate svelte-w1x65a")},m(i,h){j(i,e,h),d(e,t),d(t,r),d(e,l),d(e,c);for(let u=0;u<a.length;u+=1)a[u]&&a[u].m(c,null)},p(i,h){if(h[0]&65552){o=i[4];let u;for(u=0;u<o.length;u+=1){const f=At(i,o,u);a[u]?a[u].p(f,h):(a[u]=Vt(f),a[u].c(),a[u].m(c,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(i){i&&m(e),Oe(a,i)}}}function Vt(n){let e,t,s=n[34]+"",r,l,c=n[37]+"",o,a,i,h;function u(){return n[22](n[33])}return{c(){e=y("li"),t=y("button"),r=W(s),l=W(", "),o=W(c),a=P(),this.h()},l(f){e=w(f,"LI",{class:!0});var _=b(e);t=w(_,"BUTTON",{class:!0});var p=b(t);r=G(p,s),l=G(p,", "),o=G(p,c),p.forEach(m),a=L(_),_.forEach(m),this.h()},h(){g(t,"class","svelte-w1x65a"),g(e,"class","svelte-w1x65a")},m(f,_){j(f,e,_),d(e,t),d(t,r),d(t,l),d(t,o),d(e,a),i||(h=ce(t,"click",u),i=!0)},p(f,_){n=f,_[0]&16&&s!==(s=n[34]+"")&&ze(r,s),_[0]&16&&c!==(c=n[37]+"")&&ze(o,c)},d(f){f&&m(e),i=!1,h()}}}function jt(n){let e,t,s=n[34]+"",r,l,c,o;function a(){return n[23](n[33])}return{c(){e=y("li"),t=y("button"),r=W(s),l=P(),this.h()},l(i){e=w(i,"LI",{class:!0});var h=b(e);t=w(h,"BUTTON",{class:!0});var u=b(t);r=G(u,s),u.forEach(m),l=L(h),h.forEach(m),this.h()},h(){g(t,"class","svelte-w1x65a"),g(e,"class","svelte-w1x65a")},m(i,h){j(i,e,h),d(e,t),d(t,r),d(e,l),c||(o=ce(t,"click",a),c=!0)},p(i,h){n=i},d(i){i&&m(e),c=!1,o()}}}function an(n){let e,t;return{c(){e=y("p"),t=W("loading..."),this.h()},l(s){e=w(s,"P",{class:!0});var r=b(e);t=G(r,"loading..."),r.forEach(m),this.h()},h(){g(e,"class","loading svelte-w1x65a")},m(s,r){j(s,e,r),d(e,t)},p:le,i:le,o:le,d(s){s&&m(e)}}}function cn(n){let e,t;return e=new ws({props:{story:!0,counties:n[7],states:n[8],countiesMesh:n[9],statesMesh:n[10],nationMesh:n[11],placeData:n[3],placeName:n[0],location:n[1],countiesByDist:n[5]}}),{c(){X(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){Q(e,s,r),t=!0},p(s,r){const l={};r[0]&128&&(l.counties=s[7]),r[0]&256&&(l.states=s[8]),r[0]&512&&(l.countiesMesh=s[9]),r[0]&1024&&(l.statesMesh=s[10]),r[0]&2048&&(l.nationMesh=s[11]),r[0]&8&&(l.placeData=s[3]),r[0]&1&&(l.placeName=s[0]),r[0]&2&&(l.location=s[1]),r[0]&32&&(l.countiesByDist=s[5]),e.$set(l)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Rt(n){let e,t;return e=new nn({props:{url:n[14]}}),{c(){X(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){Q(e,s,r),t=!0},p(s,r){const l={};r[0]&16384&&(l.url=s[14]),e.$set(l)},i(s){t||(z(e.$$.fragment,s),t=!0)},o(s){A(e.$$.fragment,s),t=!1},d(s){Z(e,s)}}}function Bt(n){let e,t=n[30]+"";return{c(){e=y("p"),this.h()},l(s){e=w(s,"P",{class:!0});var r=b(e);r.forEach(m),this.h()},h(){g(e,"class","svelte-w1x65a")},m(s,r){j(s,e,r),e.innerHTML=t},p:le,d(s){s&&m(e)}}}function un(n){var it;let e,t,s,r,l,c=n[15].title+"",o,a,i,h=n[15].hed+"",u,f,_,p,E,T,k,I,S,C=n[15].discoverySummary+"",N,$,U,oe,Y,ue,x,ae,te=n[15].classic+"",Me,De,M,se,q,K,ne,Ae,rt,Je,re,Ne,be,Qt=n[15].outro+"",Ye,Ee,pe,Ue,de,_e,Ke,lt;E=new gs({props:{options:Jt}}),E.$on("change",n[21]);let R=((it=n[1])==null?void 0:it.state)&&Nt(),J=n[4]&&n[4].length&&Ut(n),$e=xe,H=[];for(let v=0;v<$e.length;v+=1)H[v]=jt(zt(n,$e,v));const ot=[cn,an],fe=[];function at(v,O){return v[3]?0:1}K=at(n),ne=fe[K]=ot[K](n);let V=n[14]&&Rt(n),ke=n[15].info,F=[];for(let v=0;v<ke.length;v+=1)F[v]=Bt(Ot(n,ke,v));return pe=new on({props:{text:"Send a tip to The Pudding",href:""}}),de=new Vs({}),{c(){e=y("article"),t=y("section"),s=y("div"),r=y("p"),l=y("strong"),o=W(c),a=P(),i=y("h1"),u=W(h),f=P(),_=y("div"),p=y("div"),X(E.$$.fragment),T=P(),k=y("div"),I=y("details"),S=y("summary"),N=W(C),$=P(),U=W(n[13]),R&&R.c(),oe=P(),Y=y("div"),J&&J.c(),ue=P(),x=y("div"),ae=y("p"),Me=W(te),De=P(),M=y("ul");for(let v=0;v<H.length;v+=1)H[v].c();se=P(),q=y("section"),ne.c(),Ae=P(),V&&V.c(),Je=P(),re=y("section");for(let v=0;v<F.length;v+=1)F[v].c();Ne=P(),be=y("p"),Ye=P(),Ee=y("p"),X(pe.$$.fragment),Ue=P(),X(de.$$.fragment),this.h()},l(v){e=w(v,"ARTICLE",{class:!0});var O=b(e);t=w(O,"SECTION",{id:!0,class:!0});var B=b(t);s=w(B,"DIV",{class:!0});var me=b(s);r=w(me,"P",{class:!0});var D=b(r);l=w(D,"STRONG",{});var he=b(l);o=G(he,c),he.forEach(m),D.forEach(m),a=L(me),i=w(me,"H1",{class:!0});var ct=b(i);u=G(ct,h),ct.forEach(m),me.forEach(m),f=L(B),_=w(B,"DIV",{class:!0});var Ve=b(_);p=w(Ve,"DIV",{class:!0});var ut=b(p);ee(E.$$.fragment,ut),ut.forEach(m),T=L(Ve),k=w(Ve,"DIV",{class:!0});var ft=b(k);I=w(ft,"DETAILS",{});var je=b(I);S=w(je,"SUMMARY",{});var Pe=b(S);N=G(Pe,C),$=L(Pe),U=G(Pe,n[13]),R&&R.l(Pe),Pe.forEach(m),oe=L(je),Y=w(je,"DIV",{class:!0});var Re=b(Y);J&&J.l(Re),ue=L(Re),x=w(Re,"DIV",{class:!0});var Be=b(x);ae=w(Be,"P",{class:!0});var ht=b(ae);Me=G(ht,te),ht.forEach(m),De=L(Be),M=w(Be,"UL",{class:!0});var pt=b(M);for(let ge=0;ge<H.length;ge+=1)H[ge].l(pt);pt.forEach(m),Be.forEach(m),Re.forEach(m),je.forEach(m),ft.forEach(m),Ve.forEach(m),B.forEach(m),se=L(O),q=w(O,"SECTION",{id:!0,class:!0});var qe=b(q);ne.l(qe),Ae=L(qe),V&&V.l(qe),qe.forEach(m),Je=L(O),re=w(O,"SECTION",{id:!0,class:!0});var Ie=b(re);for(let ge=0;ge<F.length;ge+=1)F[ge].l(Ie);Ne=L(Ie),be=w(Ie,"P",{class:!0});var Zt=b(be);Zt.forEach(m),Ye=L(Ie),Ee=w(Ie,"P",{class:!0});var dt=b(Ee);ee(pe.$$.fragment,dt),dt.forEach(m),Ie.forEach(m),O.forEach(m),Ue=L(v),ee(de.$$.fragment,v),this.h()},h(){g(r,"class","overline svelte-w1x65a"),g(i,"class","hed svelte-w1x65a"),g(s,"class","hero"),g(p,"class","select svelte-w1x65a"),g(ae,"class","svelte-w1x65a"),g(M,"class","svelte-w1x65a"),g(x,"class","classic svelte-w1x65a"),g(Y,"class","inner svelte-w1x65a"),g(k,"class","discover"),g(_,"class","ui svelte-w1x65a"),ie(_,"visible",!!n[3]),g(t,"id","intro"),g(t,"class","svelte-w1x65a"),g(q,"id","interactive"),g(q,"class","svelte-w1x65a"),Ft(()=>n[25].call(q)),ie(q,"shrink",n[12]),g(be,"class","svelte-w1x65a"),g(Ee,"class","svelte-w1x65a"),g(re,"id","outro"),g(re,"class","svelte-w1x65a"),g(e,"class","svelte-w1x65a")},m(v,O){j(v,e,O),d(e,t),d(t,s),d(s,r),d(r,l),d(l,o),d(s,a),d(s,i),d(i,u),d(t,f),d(t,_),d(_,p),Q(E,p,null),d(_,T),d(_,k),d(k,I),d(I,S),d(S,N),d(S,$),d(S,U),R&&R.m(S,null),d(I,oe),d(I,Y),J&&J.m(Y,null),d(Y,ue),d(Y,x),d(x,ae),d(ae,Me),d(x,De),d(x,M);for(let B=0;B<H.length;B+=1)H[B]&&H[B].m(M,null);I.open=n[6],d(e,se),d(e,q),fe[K].m(q,null),d(q,Ae),V&&V.m(q,null),rt=ps(q,n[25].bind(q)),d(e,Je),d(e,re);for(let B=0;B<F.length;B+=1)F[B]&&F[B].m(re,null);d(re,Ne),d(re,be),be.innerHTML=Qt,d(re,Ye),d(re,Ee),Q(pe,Ee,null),j(v,Ue,O),Q(de,v,O),_e=!0,Ke||(lt=ce(I,"toggle",n[24]),Ke=!0)},p(v,O){var me;if((!_e||O[0]&8192)&&ze(U,v[13]),(me=v[1])!=null&&me.state?R?O[0]&2&&z(R,1):(R=Nt(),R.c(),z(R,1),R.m(S,null)):R&&(Te(),A(R,1,1,()=>{R=null}),Se()),v[4]&&v[4].length?J?J.p(v,O):(J=Ut(v),J.c(),J.m(Y,ue)):J&&(J.d(1),J=null),O[0]&65536){$e=xe;let D;for(D=0;D<$e.length;D+=1){const he=zt(v,$e,D);H[D]?H[D].p(he,O):(H[D]=jt(he),H[D].c(),H[D].m(M,null))}for(;D<H.length;D+=1)H[D].d(1);H.length=$e.length}O[0]&64&&(I.open=v[6]),(!_e||O[0]&8)&&ie(_,"visible",!!v[3]);let B=K;if(K=at(v),K===B?fe[K].p(v,O):(Te(),A(fe[B],1,1,()=>{fe[B]=null}),Se(),ne=fe[K],ne?ne.p(v,O):(ne=fe[K]=ot[K](v),ne.c()),z(ne,1),ne.m(q,Ae)),v[14]?V?(V.p(v,O),O[0]&16384&&z(V,1)):(V=Rt(v),V.c(),z(V,1),V.m(q,null)):V&&(Te(),A(V,1,1,()=>{V=null}),Se()),(!_e||O[0]&4096)&&ie(q,"shrink",v[12]),O[0]&32768){ke=v[15].info;let D;for(D=0;D<ke.length;D+=1){const he=Ot(v,ke,D);F[D]?F[D].p(he,O):(F[D]=Bt(he),F[D].c(),F[D].m(re,Ne))}for(;D<F.length;D+=1)F[D].d(1);F.length=ke.length}},i(v){_e||(z(E.$$.fragment,v),z(R),z(ne),z(V),z(pe.$$.fragment,v),z(de.$$.fragment,v),_e=!0)},o(v){A(E.$$.fragment,v),A(R),A(ne),A(V),A(pe.$$.fragment,v),A(de.$$.fragment,v),_e=!1},d(v){v&&m(e),Z(E),R&&R.d(),J&&J.d(),Oe(H,v),fe[K].d(),V&&V.d(),rt(),Oe(F,v),Z(pe),v&&m(Ue),Z(de,v),Ke=!1,lt()}}}function fn(n,e,t){let s,r,l,c,o,a;Ce(n,vs,M=>t(19,o=M)),Ce(n,$s,M=>t(20,a=M));const i=wt("copy");wt("data");const h=975/610;let u,f,_,p,E,T,k=!1,I,S,C,N,$,U;function oe({name:M,phoneme:se}){t(6,k=!1),t(17,u=se),t(0,f=M)}function Y(){const M=a.url.search.split("place=")[1],se=decodeURIComponent(M);return window.history.replaceState({},"",`${window.location.pathname}`),Jt.find(K=>K.name===se)||xe[0]}async function ue(){const M=window.location.href.includes("localhost"),se=$t.get("pudding_samename");t(1,p=se||await zs(M)||{}),!se&&(p!=null&&p.state)&&$t.set("pudding_samename",p),p!=null&&p.state&&(t(4,E=await Cs(p)),t(5,T=await Ms({counties:I,location:p}))),t(1,p.lat=+(p==null?void 0:p.lat),p),t(1,p.lon=+(p==null?void 0:p.lon),p)}et(async()=>{try{const M=await ys();t(7,I=M.counties),t(8,S=M.states),t(9,C=M.countiesMesh),t(10,N=M.statesMesh),t(11,$=M.nationMesh);const se=Y();oe(se),await ue()}catch(M){console.log(M)}});const x=({detail:M})=>oe(M),ae=M=>oe(M),te=M=>oe(M);function Me(){k=this.open,t(6,k)}function De(){U=this.clientWidth,t(2,U)}return n.$$.update=()=>{n.$$.dirty[0]&1048577&&t(14,s=`${a.url}?place=${encodeURIComponent(f)}`),n.$$.dirty[0]&2&&t(13,r=p!=null&&p.state?"places near you":"curated places."),n.$$.dirty[0]&4&&t(18,l=U/h*1.25),n.$$.dirty[0]&786432&&t(12,c=l>o.height),n.$$.dirty[0]&131072&&u&&(async()=>t(3,_=await Wt(`${Yt}/assets/places/${u}.csv?2023-03-16-13:22`)))()},[f,p,U,_,E,T,k,I,S,C,N,$,c,r,s,i,oe,u,l,o,a,x,ae,te,Me,De]}class hn extends ve{constructor(e){super(),ye(this,e,fn,un,we,{},null,[-1,-1])}}function pn(n){let e,t,s,r;return e=new bs({props:{title:n[0],description:n[1],url:n[2],keywords:n[3]}}),s=new hn({}),{c(){X(e.$$.fragment),t=P(),X(s.$$.fragment)},l(l){ee(e.$$.fragment,l),t=L(l),ee(s.$$.fragment,l)},m(l,c){Q(e,l,c),j(l,t,c),Q(s,l,c),r=!0},p:le,i(l){r||(z(e.$$.fragment,l),z(s.$$.fragment,l),r=!0)},o(l){A(e.$$.fragment,l),A(s.$$.fragment,l),r=!1},d(l){Z(e,l),l&&m(t),Z(s,l)}}}function dn(n,e,t){let{data:s}=e;Es();const{title:r,description:l,url:c,keywords:o}=Et;return bt("copy",Et),bt("data",s.data),n.$$set=a=>{"data"in a&&t(4,s=a.data)},[r,l,c,o,s]}class wn extends ve{constructor(e){super(),ye(this,e,dn,pn,we,{data:4})}}export{wn as default};
