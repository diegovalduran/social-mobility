import{S as ge,i as ve,s as be,k as $,a as P,q as B,l as w,m as k,h as m,c as C,r as H,n as g,b as j,E as p,C as ne,G as Ce,o as xe,P as _t,u as Oe,Q as et,R as Rt,T as Ke,U as Xt,V as Kt,D as ue,F as fe,g as Ie,t as L,d as Se,f as A,H as tt,I as He,W as Qt,X as Zt,e as qe,Y as xt,w as mt,x as X,y as x,z as K,Z as es,_ as ts,A as Q,$ as ss,a0 as gt,a1 as ns,a2 as rs,a3 as ls,a4 as zt,a5 as os,a6 as as,a7 as is,a8 as cs,a9 as us,aa as vt,ab as bt}from"../../chunks/index-9133467c.js";import{c as Bt,h as Ht,a as fs,s as hs,S as ps,o as qt,v as ds,b as _s,M as ms,d as gs,e as vs}from"../../chunks/version-fd841704.js";import{d as bs}from"../../chunks/transform-96ff9c66.js";import{p as ys}from"../../chunks/stores-730c9f60.js";import{b as Ft}from"../../chunks/paths-eb28c9cb.js";import{w as $s,I as st,c as yt}from"../../chunks/copy-main-2fa35994.js";import{w as Gt}from"../../chunks/index-e5691633.js";import{c as ws}from"../../chunks/copy-88b0669b.js";let Pe;const nt=()=>{if(Pe!==void 0)return Pe;try{const n=window.localStorage,e="__storage_test__";n.setItem(e,e),n.removeItem(e),Pe=!0}catch{Pe=!1}finally{return Pe}},ks=n=>{if(nt())try{localStorage.removeItem(n)}catch(e){console.log(e)}},Es=(n,e)=>{if(nt())try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.log(t)}},Is=n=>{if(nt())try{return JSON.parse(localStorage.getItem(n))}catch(e){console.log(e);return}},Je={set:Es,get:Is,remove:ks};async function Ss({lat:n,lon:e,state:t}){try{const r=(await Bt(`${Ft}/assets/coordinates/${t}.csv?2023-03-15-15:09`)).map(l=>({...l,state:t,dist:Ht([+e,+n],[+l.longitude,+l.latitude])}));return r.sort((l,c)=>fs(l.dist,c.dist)),r.slice(0,5)}catch(s){console.log(s);return}}async function Ts({counties:n,location:e}){const{lon:t,lat:s}=e,l=n.features.map(({id:o,properties:a})=>({id:o,...a})).map(o=>({...o,dist:Math.round(Ht([+t,+s],o.centroid)/1e3)}));return l.sort((o,a)=>bs(o.dist,a.dist)),l.reverse(),l.map((o,a)=>({...o,index:a}))}const Ms={testing:"This is localhost testing data",city:"Lee",country:"US",hostname:"cpe-74-76-154-164.nycap.res.rr.com",ip:"74.76.154.164",loc:"42.3043,-73.2482",org:"AS11351 Charter Communications Inc",postal:"01238",region:"Massachusetts",timezone:"America/New_York"},Ds=4e3;async function Ps(n){if(n)return Promise.resolve(Ms);try{return await(await fetch("https://ipinfo.io/json?token=6f0f9c88db028a")).json()}catch(e){throw new Error(e)}}function Cs(n=!1){return new Promise((e,t)=>{const s=setTimeout(()=>t(new Error("timeout")),Ds);Ps(n).then(r=>{clearTimeout(s),e(r)}).catch(t)})}async function Os(n){var t;let e;try{const{country:s,region:r,loc:l}=await Cs(n);if(s==="US"){const[c,o]=l.split(","),a=(t=hs.find(i=>i.state===r))==null?void 0:t.postal;e={lat:c,lon:o,state:a}}}catch(s){console.log(s)}finally{return e}}function $t(n,e,t){const s=n.slice();return s[5]=e[t],s}function wt(n,e,t){const s=n.slice();return s[8]=e[t].hed,s[2]=e[t].url,s[9]=e[t].image,s}function kt(n){let e,t,s,r,l,c,o=n[8]+"",a,i,_;return{c(){e=$("div"),t=$("a"),s=$("img"),l=P(),c=$("span"),a=B(o),_=P(),this.h()},l(u){e=w(u,"DIV",{class:!0});var f=k(e);t=w(f,"A",{href:!0,class:!0});var d=k(t);s=w(d,"IMG",{src:!0,alt:!0}),l=C(d),c=w(d,"SPAN",{class:!0});var h=k(c);a=H(h,o),h.forEach(m),d.forEach(m),_=C(f),f.forEach(m),this.h()},h(){_t(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+n[9]+".jpg")||g(s,"src",r),g(s,"alt","thumbnail"),g(c,"class","svelte-1en6glb"),g(t,"href",i="https://pudding.cool/"+n[2]),g(t,"class","svelte-1en6glb"),g(e,"class","story svelte-1en6glb")},m(u,f){j(u,e,f),p(e,t),p(t,s),p(t,l),p(t,c),p(c,a),p(e,_)},p(u,f){f&1&&!_t(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+u[9]+".jpg")&&g(s,"src",r),f&1&&o!==(o=u[8]+"")&&Oe(a,o),f&1&&i!==(i="https://pudding.cool/"+u[2])&&g(t,"href",i)},d(u){u&&m(e)}}}function Et(n){let e,t,s,r=n[5].name.toUpperCase()+"",l,c;return{c(){e=$("li"),t=$("a"),s=$("span"),l=B(r),c=P(),this.h()},l(o){e=w(o,"LI",{class:!0});var a=k(e);t=w(a,"A",{href:!0,class:!0});var i=k(t);s=w(i,"SPAN",{class:!0});var _=k(s);l=H(_,r),_.forEach(m),i.forEach(m),c=C(a),a.forEach(m),this.h()},h(){g(s,"class","svelte-1en6glb"),g(t,"href",n[5].url),g(t,"class","svelte-1en6glb"),g(e,"class","svelte-1en6glb")},m(o,a){j(o,e,a),p(e,t),p(t,s),p(s,l),p(e,c)},p:ne,d(o){o&&m(e)}}}function As(n){let e,t,s,r,l,c,o,a,i,_,u,f,d,h=n[0],y=[];for(let v=0;v<h.length;v+=1)y[v]=kt(wt(n,h,v));let S=n[1],I=[];for(let v=0;v<S.length;v+=1)I[v]=Et($t(n,S,v));return{c(){e=$("footer"),t=$("section");for(let v=0;v<y.length;v+=1)y[v].c();s=P(),r=$("section"),l=$("div"),c=P(),o=$("p"),a=$("a"),i=B("The Pudding"),_=B(`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),u=P(),f=$("section"),d=$("ul");for(let v=0;v<I.length;v+=1)I[v].c();this.h()},l(v){e=w(v,"FOOTER",{class:!0});var T=k(e);t=w(T,"SECTION",{class:!0});var E=k(t);for(let V=0;V<y.length;V+=1)y[V].l(E);E.forEach(m),s=C(T),r=w(T,"SECTION",{class:!0});var R=k(r);l=w(R,"DIV",{class:!0});var oe=k(l);oe.forEach(m),c=C(R),o=w(R,"P",{});var Z=k(o);a=w(Z,"A",{href:!0,class:!0});var ee=k(a);i=H(ee,"The Pudding"),ee.forEach(m),_=H(Z,`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),Z.forEach(m),R.forEach(m),u=C(T),f=w(T,"SECTION",{class:!0});var Y=k(f);d=w(Y,"UL",{class:!0});var re=k(d);for(let V=0;V<I.length;V+=1)I[V].l(re);re.forEach(m),Y.forEach(m),T.forEach(m),this.h()},h(){g(t,"class","stories svelte-1en6glb"),g(l,"class","wordmark svelte-1en6glb"),g(a,"href","https://pudding.cool"),g(a,"class","svelte-1en6glb"),g(r,"class","about svelte-1en6glb"),g(d,"class","svelte-1en6glb"),g(f,"class","links svelte-1en6glb"),g(e,"class","svelte-1en6glb")},m(v,T){j(v,e,T),p(e,t);for(let E=0;E<y.length;E+=1)y[E].m(t,null);p(e,s),p(e,r),p(r,l),l.innerHTML=$s,p(r,c),p(r,o),p(o,a),p(a,i),p(o,_),p(e,u),p(e,f),p(f,d);for(let E=0;E<I.length;E+=1)I[E].m(d,null)},p(v,[T]){if(T&1){h=v[0];let E;for(E=0;E<h.length;E+=1){const R=wt(v,h,E);y[E]?y[E].p(R,T):(y[E]=kt(R),y[E].c(),y[E].m(t,null))}for(;E<y.length;E+=1)y[E].d(1);y.length=h.length}if(T&2){S=v[1];let E;for(E=0;E<S.length;E+=1){const R=$t(v,S,E);I[E]?I[E].p(R,T):(I[E]=Et(R),I[E].c(),I[E].m(d,null))}for(;E<I.length;E+=1)I[E].d(1);I.length=S.length}},i:ne,o:ne,d(v){v&&m(e),Ce(y,v),Ce(I,v)}}}function Ls(n,e,t){let s,r=[];const c=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,o=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return xe(async()=>{s=window.location.href;const i=await(await fetch(c)).json();t(0,r=i.filter(_=>!s.includes(_.url)).slice(0,4))}),[r,o,c]}class Ns extends ge{constructor(e){super(),ve(this,e,Ls,As,be,{})}}function Wt(n){const e=n-1;return e*e*e+1}function js(n,{delay:e=0,duration:t=400,easing:s=et}={}){const r=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:l=>`opacity: ${l*r}`}}function Us(n,{delay:e=0,duration:t=400,easing:s=Wt,x:r=0,y:l=0,opacity:c=0}={}){const o=getComputedStyle(n),a=+o.opacity,i=o.transform==="none"?"":o.transform,_=a*(1-c);return{delay:e,duration:t,easing:s,css:(u,f)=>`
			transform: ${i} translate(${(1-u)*r}px, ${(1-u)*l}px);
			opacity: ${a-_*f}`}}function Vs(n,{from:e,to:t},s={}){const r=getComputedStyle(n),l=r.transform==="none"?"":r.transform,[c,o]=r.transformOrigin.split(" ").map(parseFloat),a=e.left+e.width*c/t.width-(t.left+c),i=e.top+e.height*o/t.height-(t.top+o),{delay:_=0,duration:u=d=>Math.sqrt(d)*120,easing:f=Wt}=s;return{delay:_,duration:Rt(u)?u(Math.sqrt(a*a+i*i)):u,easing:f,css:(d,h)=>{const y=h*a,S=h*i,I=d+h*e.width/t.width,v=d+h*e.height/t.height;return`transform: ${l} translate(${y}px, ${S}px) scale(${I}, ${v});`}}}const Rs={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},zs=()=>{const{subscribe:n,update:e}=Gt([]),t={};let s=0;function r(i){return i instanceof Object}function l(i="default",_={}){return t[i]=_,t}function c(i,_){const u={target:"default",...r(i)?i:{..._,msg:i}},f=t[u.target]||{},d={...Rs,...f,...u,theme:{...f.theme,...u.theme},classes:[...f.classes||[],...u.classes||[]],id:++s};return e(h=>d.reversed?[...h,d]:[d,...h]),s}function o(i){e(_=>{if(!_.length||i===0)return[];if(typeof i=="function")return _.filter(f=>i(f));if(r(i))return _.filter(f=>f.target!==i.target);const u=i||Math.max(..._.map(f=>f.id));return _.filter(f=>f.id!==u)})}function a(i,_){const u=r(i)?i:{..._,id:i};e(f=>{const d=f.findIndex(h=>h.id===u.id);return d>-1&&(f[d]={...f[d],...u}),f})}return{subscribe:n,push:c,pop:o,set:a,_init:l}},Fe=zs();function It(n){return Object.prototype.toString.call(n)==="[object Date]"}function Qe(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const s=e.map((r,l)=>Qe(n[l],r));return r=>s.map(l=>l(r))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(It(n)&&It(e)){n=n.getTime(),e=e.getTime();const l=e-n;return c=>new Date(n+c*l)}const s=Object.keys(e),r={};return s.forEach(l=>{r[l]=Qe(n[l],e[l])}),l=>{const c={};return s.forEach(o=>{c[o]=r[o](l)}),c}}if(t==="number"){const s=e-n;return r=>n+r*s}throw new Error(`Cannot interpolate ${t} values`)}function Bs(n,e={}){const t=Gt(n);let s,r=n;function l(c,o){if(n==null)return t.set(n=c),Promise.resolve();r=c;let a=s,i=!1,{delay:_=0,duration:u=400,easing:f=et,interpolate:d=Qe}=Ke(Ke({},e),o);if(u===0)return a&&(a.abort(),a=null),t.set(n=r),Promise.resolve();const h=Xt()+_;let y;return s=Kt(S=>{if(S<h)return!0;i||(y=d(n,c),typeof u=="function"&&(u=u(n,c)),i=!0),a&&(a.abort(),a=null);const I=S-h;return I>u?(t.set(n=c),!1):(t.set(n=y(f(I/u))),!0)}),s.promise}return{set:l,update:(c,o)=>l(c(r,n),o),subscribe:t.subscribe}}function Hs(n){let e,t=n[0].msg+"",s;return{c(){e=new Zt(!1),s=qe(),this.h()},l(r){e=xt(r,!1),s=qe(),this.h()},h(){e.a=s},m(r,l){e.m(t,r,l),j(r,s,l)},p(r,l){l&1&&t!==(t=r[0].msg+"")&&e.p(t)},i:ne,o:ne,d(r){r&&m(s),r&&e.d()}}}function qs(n){let e,t,s;const r=[n[2]];var l=n[0].component.src;function c(o){let a={};for(let i=0;i<r.length;i+=1)a=Ke(a,r[i]);return{props:a}}return l&&(e=mt(l,c())),{c(){e&&X(e.$$.fragment),t=qe()},l(o){e&&x(e.$$.fragment,o),t=qe()},m(o,a){e&&K(e,o,a),j(o,t,a),s=!0},p(o,a){const i=a&4?es(r,[ts(o[2])]):{};if(l!==(l=o[0].component.src)){if(e){Ie();const _=e;L(_.$$.fragment,1,0,()=>{Q(_,1)}),Se()}l?(e=mt(l,c()),X(e.$$.fragment),A(e.$$.fragment,1),K(e,t.parentNode,t)):e=null}else l&&e.$set(i)},i(o){s||(e&&A(e.$$.fragment,o),s=!0)},o(o){e&&L(e.$$.fragment,o),s=!1},d(o){o&&m(t),e&&Q(e,o)}}}function St(n){let e,t,s;return{c(){e=$("div"),this.h()},l(r){e=w(r,"DIV",{class:!0,role:!0,tabindex:!0}),k(e).forEach(m),this.h()},h(){g(e,"class","_toastBtn pe svelte-6p19b0"),g(e,"role","button"),g(e,"tabindex","0")},m(r,l){j(r,e,l),t||(s=[fe(e,"click",n[4]),fe(e,"keydown",n[8])],t=!0)},p:ne,d(r){r&&m(e),t=!1,tt(s)}}}function Fs(n){let e,t,s,r,l,c,o,a,i,_;const u=[qs,Hs],f=[];function d(y,S){return y[0].component?0:1}s=d(n),r=f[s]=u[s](n);let h=n[0].dismissable&&St(n);return{c(){e=$("div"),t=$("div"),r.c(),l=P(),h&&h.c(),c=P(),o=$("progress"),this.h()},l(y){e=w(y,"DIV",{class:!0});var S=k(e);t=w(S,"DIV",{role:!0,class:!0});var I=k(t);r.l(I),I.forEach(m),l=C(S),h&&h.l(S),c=C(S),o=w(S,"PROGRESS",{class:!0}),k(o).forEach(m),S.forEach(m),this.h()},h(){g(t,"role","status"),g(t,"class","_toastMsg svelte-6p19b0"),ue(t,"pe",n[0].component),g(o,"class","_toastBar svelte-6p19b0"),o.value=n[1],g(e,"class","_toastItem svelte-6p19b0"),ue(e,"pe",n[0].pausable)},m(y,S){j(y,e,S),p(e,t),f[s].m(t,null),p(e,l),h&&h.m(e,null),p(e,c),p(e,o),a=!0,i||(_=[fe(e,"mouseenter",n[9]),fe(e,"mouseleave",n[6])],i=!0)},p(y,[S]){let I=s;s=d(y),s===I?f[s].p(y,S):(Ie(),L(f[I],1,1,()=>{f[I]=null}),Se(),r=f[s],r?r.p(y,S):(r=f[s]=u[s](y),r.c()),A(r,1),r.m(t,null)),(!a||S&1)&&ue(t,"pe",y[0].component),y[0].dismissable?h?h.p(y,S):(h=St(y),h.c(),h.m(e,c)):h&&(h.d(1),h=null),(!a||S&2)&&(o.value=y[1]),(!a||S&1)&&ue(e,"pe",y[0].pausable)},i(y){a||(A(r),a=!0)},o(y){L(r),a=!1},d(y){y&&m(e),f[s].d(),h&&h.d(),i=!1,tt(_)}}}function Xe(n,e="undefined"){return typeof n===e}function Gs(n,e,t){let s,{item:r}=e,l=r.initial,c=l,o=!1,a={},i;const _=Bs(r.initial,{duration:r.duration,easing:et});He(n,_,v=>t(1,s=v));function u(){Fe.pop(r.id)}function f(){(s===1||s===0)&&u()}function d(){!o&&s!==l&&(_.set(s,{duration:0}),o=!0)}function h(){if(o){const v=r.duration,T=v-v*((s-c)/(l-c));_.set(l,{duration:T}).then(f),o=!1}}function y(v=document){if(Xe(v.hidden))return;const T=()=>v.hidden?d():h(),E="visibilitychange";v.addEventListener(E,T),i=()=>v.removeEventListener(E,T),T()}xe(y),Qt(()=>{Xe(r.onpop,"function")&&r.onpop(r.id),i&&i()});const S=v=>{v instanceof KeyboardEvent&&["Enter"," "].includes(v.key)&&u()},I=()=>{r.pausable&&d()};return n.$$set=v=>{"item"in v&&t(0,r=v.item)},n.$$.update=()=>{if(n.$$.dirty&1&&(Xe(r.progress)||t(0,r.next=r.progress,r)),n.$$.dirty&131&&l!==r.next&&(t(7,l=r.next),c=s,o=!1,_.set(l).then(f)),n.$$.dirty&1&&r.component){const{props:v={},sendIdTo:T}=r.component;t(2,a={...v,...T&&{[T]:r.id}})}},[r,s,a,_,u,d,h,l,S,I]}class Ws extends ge{constructor(e){super(),ve(this,e,Gs,Fs,be,{item:0})}}function Tt(n,e,t){const s=n.slice();return s[4]=e[t],s}function Mt(n,e){let t,s,r,l,c,o,a,i,_=ne,u;return s=new Ws({props:{item:e[4]}}),{key:n,first:null,c(){t=$("li"),X(s.$$.fragment),r=P(),this.h()},l(f){t=w(f,"LI",{class:!0,style:!0});var d=k(t);x(s.$$.fragment,d),r=C(d),d.forEach(m),this.h()},h(){g(t,"class",l=gt(e[4].classes.join(" "))+" svelte-1u812xz"),g(t,"style",c=Dt(e[4].theme)),this.first=t},m(f,d){j(f,t,d),K(s,t,null),p(t,r),u=!0},p(f,d){e=f;const h={};d&1&&(h.item=e[4]),s.$set(h),(!u||d&1&&l!==(l=gt(e[4].classes.join(" "))+" svelte-1u812xz"))&&g(t,"class",l),(!u||d&1&&c!==(c=Dt(e[4].theme)))&&g(t,"style",c)},r(){i=t.getBoundingClientRect()},f(){ns(t),_(),rs(t,i)},a(){_(),_=ls(t,i,Vs,{duration:200})},i(f){u||(A(s.$$.fragment,f),zt(()=>{a&&a.end(1),o=os(t,Us,e[4].intro),o.start()}),u=!0)},o(f){L(s.$$.fragment,f),o&&o.invalidate(),a=as(t,js,{}),u=!1},d(f){f&&m(t),Q(s),f&&a&&a.end()}}}function Ys(n){let e,t=[],s=new Map,r,l=n[0];const c=o=>o[4].id;for(let o=0;o<l.length;o+=1){let a=Tt(n,l,o),i=c(a);s.set(i,t[o]=Mt(i,a))}return{c(){e=$("ul");for(let o=0;o<t.length;o+=1)t[o].c();this.h()},l(o){e=w(o,"UL",{class:!0});var a=k(e);for(let i=0;i<t.length;i+=1)t[i].l(a);a.forEach(m),this.h()},h(){g(e,"class","_toastContainer svelte-1u812xz")},m(o,a){j(o,e,a);for(let i=0;i<t.length;i+=1)t[i].m(e,null);r=!0},p(o,[a]){if(a&1){l=o[0],Ie();for(let i=0;i<t.length;i+=1)t[i].r();t=ss(t,a,c,1,o,l,s,e,is,Mt,null,Tt);for(let i=0;i<t.length;i+=1)t[i].a();Se()}},i(o){if(!r){for(let a=0;a<l.length;a+=1)A(t[a]);r=!0}},o(o){for(let a=0;a<t.length;a+=1)L(t[a]);r=!1},d(o){o&&m(e);for(let a=0;a<t.length;a+=1)t[a].d()}}}function Dt(n){return Object.keys(n).reduce((e,t)=>`${e}${t}:${n[t]};`,"")}function Js(n,e,t){let s;He(n,Fe,o=>t(3,s=o));let{options:r={}}=e,{target:l="default"}=e,c=[];return n.$$set=o=>{"options"in o&&t(1,r=o.options),"target"in o&&t(2,l=o.target)},n.$$.update=()=>{n.$$.dirty&6&&Fe._init(l,r),n.$$.dirty&12&&t(0,c=s.filter(o=>o.target===l))},[c,r,l,s]}class Xs extends ge{constructor(e){super(),ve(this,e,Js,Ys,be,{options:1,target:2})}}function Ks(n){let e,t,s,r,l,c,o,a,i,_;return e=new Xs({props:{options:n[1]}}),c=new st({props:{name:"forward",strokeWidth:"3px"}}),{c(){X(e.$$.fragment),t=P(),s=$("div"),r=$("button"),l=B("Share map "),X(c.$$.fragment),this.h()},l(u){x(e.$$.fragment,u),t=C(u),s=w(u,"DIV",{class:!0});var f=k(s);r=w(f,"BUTTON",{class:!0});var d=k(r);l=H(d,"Share map "),x(c.$$.fragment,d),d.forEach(m),f.forEach(m),this.h()},h(){g(r,"class","svelte-1jtbpg3"),g(s,"class","share svelte-1jtbpg3")},m(u,f){K(e,u,f),j(u,t,f),j(u,s,f),p(s,r),p(r,l),K(c,r,null),a=!0,i||(_=[cs(o=ws.call(null,r,n[0])),fe(r,"svelte-copy",n[2])],i=!0)},p(u,[f]){o&&Rt(o.update)&&f&1&&o.update.call(null,u[0])},i(u){a||(A(e.$$.fragment,u),A(c.$$.fragment,u),a=!0)},o(u){L(e.$$.fragment,u),L(c.$$.fragment,u),a=!1},d(u){Q(e,u),u&&m(t),u&&m(s),Q(c),i=!1,tt(_)}}}function Qs(n,e,t){let{url:s}=e;const r={duration:1500,dismissable:!1,intro:{y:32}};function l(){Fe.push("Link copied!")}return n.$$set=c=>{"url"in c&&t(0,s=c.url)},[s,r,l]}class Zs extends ge{constructor(e){super(),ve(this,e,Qs,Ks,be,{url:0})}}function xs(n){let e,t,s,r,l,c;return l=new st({props:{stroke:"white",name:"dollar-sign"}}),{c(){e=$("a"),t=B(n[0]),s=P(),r=$("span"),X(l.$$.fragment),this.h()},l(o){e=w(o,"A",{class:!0,href:!0,target:!0,rel:!0,role:!0});var a=k(e);t=H(a,n[0]),s=C(a),r=w(a,"SPAN",{class:!0});var i=k(r);x(l.$$.fragment,i),i.forEach(m),a.forEach(m),this.h()},h(){g(r,"class","svelte-423hsz"),g(e,"class","tip-button svelte-423hsz"),g(e,"href",n[1]),g(e,"target","_blank"),g(e,"rel","noreferrer"),g(e,"role","button")},m(o,a){j(o,e,a),p(e,t),p(e,s),p(e,r),K(l,r,null),c=!0},p(o,[a]){(!c||a&1)&&Oe(t,o[0]),(!c||a&2)&&g(e,"href",o[1])},i(o){c||(A(l.$$.fragment,o),c=!0)},o(o){L(l.$$.fragment,o),c=!1},d(o){o&&m(e),Q(l)}}}function en(n,e,t){let{text:s="Tip"}=e,{href:r}=e;return n.$$set=l=>{"text"in l&&t(0,s=l.text),"href"in l&&t(1,r=l.href)},[s,r]}class tn extends ge{constructor(e){super(),ve(this,e,en,xs,be,{text:0,href:1})}}const Ze=[{name:"Portland",phoneme:"4010"},{name:"Paris",phoneme:"3785"},{name:"Georgia",phoneme:"1899"},{name:"Pluto",phoneme:"3968"},{name:"Casselberry",phoneme:"0820"}];function Pt(n,e,t){const s=n.slice();return s[30]=e[t].value,s}function Ct(n,e,t){const s=n.slice();s[33]=e[t];const r=s[33];return s[34]=r.name,s}function Ot(n,e,t){const s=n.slice();s[33]=e[t];const r=s[33];return s[34]=r.name,s[37]=r.state,s}function At(n){let e,t;return e=new st({props:{name:"map-pin",strokeWidth:"3px"}}),{c(){X(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,r){K(e,s,r),t=!0},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function Lt(n){let e,t,s=n[15].locate+"",r,l,c,o=n[4],a=[];for(let i=0;i<o.length;i+=1)a[i]=Nt(Ot(n,o,i));return{c(){e=$("div"),t=$("p"),r=B(s),l=P(),c=$("ul");for(let i=0;i<a.length;i+=1)a[i].c();this.h()},l(i){e=w(i,"DIV",{class:!0});var _=k(e);t=w(_,"P",{class:!0});var u=k(t);r=H(u,s),u.forEach(m),l=C(_),c=w(_,"UL",{class:!0});var f=k(c);for(let d=0;d<a.length;d+=1)a[d].l(f);f.forEach(m),_.forEach(m),this.h()},h(){g(t,"class","svelte-otcvr7"),g(c,"class","svelte-otcvr7"),g(e,"class","locate svelte-otcvr7")},m(i,_){j(i,e,_),p(e,t),p(t,r),p(e,l),p(e,c);for(let u=0;u<a.length;u+=1)a[u].m(c,null)},p(i,_){if(_[0]&65552){o=i[4];let u;for(u=0;u<o.length;u+=1){const f=Ot(i,o,u);a[u]?a[u].p(f,_):(a[u]=Nt(f),a[u].c(),a[u].m(c,null))}for(;u<a.length;u+=1)a[u].d(1);a.length=o.length}},d(i){i&&m(e),Ce(a,i)}}}function Nt(n){let e,t,s=n[34]+"",r,l,c=n[37]+"",o,a,i,_;function u(){return n[22](n[33])}return{c(){e=$("li"),t=$("button"),r=B(s),l=B(", "),o=B(c),a=P(),this.h()},l(f){e=w(f,"LI",{class:!0});var d=k(e);t=w(d,"BUTTON",{class:!0});var h=k(t);r=H(h,s),l=H(h,", "),o=H(h,c),h.forEach(m),a=C(d),d.forEach(m),this.h()},h(){g(t,"class","svelte-otcvr7"),g(e,"class","svelte-otcvr7")},m(f,d){j(f,e,d),p(e,t),p(t,r),p(t,l),p(t,o),p(e,a),i||(_=fe(t,"click",u),i=!0)},p(f,d){n=f,d[0]&16&&s!==(s=n[34]+"")&&Oe(r,s),d[0]&16&&c!==(c=n[37]+"")&&Oe(o,c)},d(f){f&&m(e),i=!1,_()}}}function jt(n){let e,t,s=n[34]+"",r,l,c,o;function a(){return n[23](n[33])}return{c(){e=$("li"),t=$("button"),r=B(s),l=P(),this.h()},l(i){e=w(i,"LI",{class:!0});var _=k(e);t=w(_,"BUTTON",{class:!0});var u=k(t);r=H(u,s),u.forEach(m),l=C(_),_.forEach(m),this.h()},h(){g(t,"class","svelte-otcvr7"),g(e,"class","svelte-otcvr7")},m(i,_){j(i,e,_),p(e,t),p(t,r),p(e,l),c||(o=fe(t,"click",a),c=!0)},p(i,_){n=i},d(i){i&&m(e),c=!1,o()}}}function sn(n){let e,t;return{c(){e=$("p"),t=B("loading..."),this.h()},l(s){e=w(s,"P",{class:!0});var r=k(e);t=H(r,"loading..."),r.forEach(m),this.h()},h(){g(e,"class","loading svelte-otcvr7")},m(s,r){j(s,e,r),p(e,t)},p:ne,i:ne,o:ne,d(s){s&&m(e)}}}function nn(n){let e,t;return e=new ms({props:{story:!0,counties:n[7],states:n[8],countiesMesh:n[9],statesMesh:n[10],nationMesh:n[11],placeData:n[3],placeName:n[0],location:n[1],countiesByDist:n[5]}}),{c(){X(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,r){K(e,s,r),t=!0},p(s,r){const l={};r[0]&128&&(l.counties=s[7]),r[0]&256&&(l.states=s[8]),r[0]&512&&(l.countiesMesh=s[9]),r[0]&1024&&(l.statesMesh=s[10]),r[0]&2048&&(l.nationMesh=s[11]),r[0]&8&&(l.placeData=s[3]),r[0]&1&&(l.placeName=s[0]),r[0]&2&&(l.location=s[1]),r[0]&32&&(l.countiesByDist=s[5]),e.$set(l)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function Ut(n){let e,t;return e=new Zs({props:{url:n[14]}}),{c(){X(e.$$.fragment)},l(s){x(e.$$.fragment,s)},m(s,r){K(e,s,r),t=!0},p(s,r){const l={};r[0]&16384&&(l.url=s[14]),e.$set(l)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function Vt(n){let e,t=n[30]+"";return{c(){e=$("p"),this.h()},l(s){e=w(s,"P",{class:!0});var r=k(e);r.forEach(m),this.h()},h(){g(e,"class","svelte-otcvr7")},m(s,r){j(s,e,r),e.innerHTML=t},p:ne,d(s){s&&m(e)}}}function rn(n){var it;let e,t,s,r,l,c=n[15].title+"",o,a,i,_=n[15].hed+"",u,f,d,h,y,S,I,v,T,E=n[15].discoverySummary+"",R,oe,Z,ee,Y,re,V,ae,Ae=n[15].classic+"",Te,Me,M,le,z,J,te,Le,rt,Ge,se,Ne,ye,Yt=n[15].outro+"",We,$e,he,je,pe,de,Ye,lt;y=new ps({props:{options:qt}}),y.$on("change",n[21]);let U=((it=n[1])==null?void 0:it.state)&&At(),q=n[4]&&n[4].length&&Lt(n),we=Ze,F=[];for(let b=0;b<we.length;b+=1)F[b]=jt(Ct(n,we,b));const ot=[nn,sn],ie=[];function at(b,O){return b[3]?0:1}J=at(n),te=ie[J]=ot[J](n);let N=n[14]&&Ut(n),ke=n[15].info,G=[];for(let b=0;b<ke.length;b+=1)G[b]=Vt(Pt(n,ke,b));return he=new tn({props:{text:"Send a tip to The Pudding",href:""}}),pe=new Ns({}),{c(){e=$("article"),t=$("section"),s=$("div"),r=$("p"),l=$("strong"),o=B(c),a=P(),i=$("h1"),u=B(_),f=P(),d=$("div"),h=$("div"),X(y.$$.fragment),S=P(),I=$("div"),v=$("details"),T=$("summary"),R=B(E),oe=P(),Z=B(n[13]),U&&U.c(),ee=P(),Y=$("div"),q&&q.c(),re=P(),V=$("div"),ae=$("p"),Te=B(Ae),Me=P(),M=$("ul");for(let b=0;b<F.length;b+=1)F[b].c();le=P(),z=$("section"),te.c(),Le=P(),N&&N.c(),Ge=P(),se=$("section");for(let b=0;b<G.length;b+=1)G[b].c();Ne=P(),ye=$("p"),We=P(),$e=$("p"),X(he.$$.fragment),je=P(),X(pe.$$.fragment),this.h()},l(b){e=w(b,"ARTICLE",{class:!0});var O=k(e);t=w(O,"SECTION",{id:!0,class:!0});var W=k(t);s=w(W,"DIV",{class:!0});var _e=k(s);r=w(_e,"P",{class:!0});var D=k(r);l=w(D,"STRONG",{});var ce=k(l);o=H(ce,c),ce.forEach(m),D.forEach(m),a=C(_e),i=w(_e,"H1",{class:!0});var ct=k(i);u=H(ct,_),ct.forEach(m),_e.forEach(m),f=C(W),d=w(W,"DIV",{class:!0});var Ue=k(d);h=w(Ue,"DIV",{class:!0});var ut=k(h);x(y.$$.fragment,ut),ut.forEach(m),S=C(Ue),I=w(Ue,"DIV",{class:!0});var ft=k(I);v=w(ft,"DETAILS",{});var Ve=k(v);T=w(Ve,"SUMMARY",{});var De=k(T);R=H(De,E),oe=C(De),Z=H(De,n[13]),U&&U.l(De),De.forEach(m),ee=C(Ve),Y=w(Ve,"DIV",{class:!0});var Re=k(Y);q&&q.l(Re),re=C(Re),V=w(Re,"DIV",{class:!0});var ze=k(V);ae=w(ze,"P",{class:!0});var ht=k(ae);Te=H(ht,Ae),ht.forEach(m),Me=C(ze),M=w(ze,"UL",{class:!0});var pt=k(M);for(let me=0;me<F.length;me+=1)F[me].l(pt);pt.forEach(m),ze.forEach(m),Re.forEach(m),Ve.forEach(m),ft.forEach(m),Ue.forEach(m),W.forEach(m),le=C(O),z=w(O,"SECTION",{id:!0,class:!0});var Be=k(z);te.l(Be),Le=C(Be),N&&N.l(Be),Be.forEach(m),Ge=C(O),se=w(O,"SECTION",{id:!0,class:!0});var Ee=k(se);for(let me=0;me<G.length;me+=1)G[me].l(Ee);Ne=C(Ee),ye=w(Ee,"P",{class:!0});var Jt=k(ye);Jt.forEach(m),We=C(Ee),$e=w(Ee,"P",{class:!0});var dt=k($e);x(he.$$.fragment,dt),dt.forEach(m),Ee.forEach(m),O.forEach(m),je=C(b),x(pe.$$.fragment,b),this.h()},h(){g(r,"class","overline svelte-otcvr7"),g(i,"class","hed svelte-otcvr7"),g(s,"class","hero"),g(h,"class","select svelte-otcvr7"),g(ae,"class","svelte-otcvr7"),g(M,"class","svelte-otcvr7"),g(V,"class","classic svelte-otcvr7"),g(Y,"class","inner svelte-otcvr7"),g(I,"class","discover"),g(d,"class","ui svelte-otcvr7"),ue(d,"visible",!!n[3]),g(t,"id","intro"),g(t,"class","svelte-otcvr7"),g(z,"id","interactive"),g(z,"class","svelte-otcvr7"),zt(()=>n[25].call(z)),ue(z,"shrink",n[12]),g(ye,"class","svelte-otcvr7"),g($e,"class","svelte-otcvr7"),g(se,"id","outro"),g(se,"class","svelte-otcvr7"),g(e,"class","svelte-otcvr7")},m(b,O){j(b,e,O),p(e,t),p(t,s),p(s,r),p(r,l),p(l,o),p(s,a),p(s,i),p(i,u),p(t,f),p(t,d),p(d,h),K(y,h,null),p(d,S),p(d,I),p(I,v),p(v,T),p(T,R),p(T,oe),p(T,Z),U&&U.m(T,null),p(v,ee),p(v,Y),q&&q.m(Y,null),p(Y,re),p(Y,V),p(V,ae),p(ae,Te),p(V,Me),p(V,M);for(let W=0;W<F.length;W+=1)F[W].m(M,null);v.open=n[6],p(e,le),p(e,z),ie[J].m(z,null),p(z,Le),N&&N.m(z,null),rt=us(z,n[25].bind(z)),p(e,Ge),p(e,se);for(let W=0;W<G.length;W+=1)G[W].m(se,null);p(se,Ne),p(se,ye),ye.innerHTML=Yt,p(se,We),p(se,$e),K(he,$e,null),j(b,je,O),K(pe,b,O),de=!0,Ye||(lt=fe(v,"toggle",n[24]),Ye=!0)},p(b,O){var _e;if((!de||O[0]&8192)&&Oe(Z,b[13]),(_e=b[1])!=null&&_e.state?U?O[0]&2&&A(U,1):(U=At(),U.c(),A(U,1),U.m(T,null)):U&&(Ie(),L(U,1,1,()=>{U=null}),Se()),b[4]&&b[4].length?q?q.p(b,O):(q=Lt(b),q.c(),q.m(Y,re)):q&&(q.d(1),q=null),O[0]&65536){we=Ze;let D;for(D=0;D<we.length;D+=1){const ce=Ct(b,we,D);F[D]?F[D].p(ce,O):(F[D]=jt(ce),F[D].c(),F[D].m(M,null))}for(;D<F.length;D+=1)F[D].d(1);F.length=we.length}O[0]&64&&(v.open=b[6]),(!de||O[0]&8)&&ue(d,"visible",!!b[3]);let W=J;if(J=at(b),J===W?ie[J].p(b,O):(Ie(),L(ie[W],1,1,()=>{ie[W]=null}),Se(),te=ie[J],te?te.p(b,O):(te=ie[J]=ot[J](b),te.c()),A(te,1),te.m(z,Le)),b[14]?N?(N.p(b,O),O[0]&16384&&A(N,1)):(N=Ut(b),N.c(),A(N,1),N.m(z,null)):N&&(Ie(),L(N,1,1,()=>{N=null}),Se()),(!de||O[0]&4096)&&ue(z,"shrink",b[12]),O[0]&32768){ke=b[15].info;let D;for(D=0;D<ke.length;D+=1){const ce=Pt(b,ke,D);G[D]?G[D].p(ce,O):(G[D]=Vt(ce),G[D].c(),G[D].m(se,Ne))}for(;D<G.length;D+=1)G[D].d(1);G.length=ke.length}},i(b){de||(A(y.$$.fragment,b),A(U),A(te),A(N),A(he.$$.fragment,b),A(pe.$$.fragment,b),de=!0)},o(b){L(y.$$.fragment,b),L(U),L(te),L(N),L(he.$$.fragment,b),L(pe.$$.fragment,b),de=!1},d(b){b&&m(e),Q(y),U&&U.d(),q&&q.d(),Ce(F,b),ie[J].d(),N&&N.d(),rt(),Ce(G,b),Q(he),b&&m(je),Q(pe,b),Ye=!1,lt()}}}const ln=!0;function on(n,e,t){let s,r,l,c,o,a;He(n,ds,M=>t(19,o=M)),He(n,ys,M=>t(20,a=M));const i=vt("copy");vt("data");const _=975/610;let u,f,d,h,y,S,I=!1,v,T,E,R,oe,Z;function ee({name:M,phoneme:le}){t(6,I=!1),t(17,u=le),t(0,f=M)}function Y(){const M=a.url.search.split("place=")[1],le=decodeURIComponent(M);return window.history.replaceState({},"",`${window.location.pathname}`),qt.find(J=>J.name===le)||Ze[0]}async function re(){Je.remove("pudding_samename");const M=Je.get("pudding_samename");t(1,h=M||await Os(ln)||{}),!M&&(h!=null&&h.state)&&Je.set("pudding_samename",h),h!=null&&h.state&&(t(4,y=await Ss(h)),t(5,S=await Ts({counties:v,location:h}))),t(1,h.lat=+(h==null?void 0:h.lat),h),t(1,h.lon=+(h==null?void 0:h.lon),h)}xe(async()=>{try{const M=await _s();t(7,v=M.counties),t(8,T=M.states),t(9,E=M.countiesMesh),t(10,R=M.statesMesh),t(11,oe=M.nationMesh);const le=Y();ee(le),await re()}catch(M){console.log(M)}});const V=({detail:M})=>ee(M),ae=M=>ee(M),Ae=M=>ee(M);function Te(){I=this.open,t(6,I)}function Me(){Z=this.clientWidth,t(2,Z)}return n.$$.update=()=>{n.$$.dirty[0]&1048577&&t(14,s=`${a.url}?place=${encodeURIComponent(f)}`),n.$$.dirty[0]&2&&t(13,r=h!=null&&h.state?"places near you":"curated places."),n.$$.dirty[0]&4&&t(18,l=Z/_*1.25),n.$$.dirty[0]&786432&&t(12,c=l>o.height),n.$$.dirty[0]&131072&&u&&(async()=>t(3,d=await Bt(`${Ft}/assets/places/${u}.csv?2023-03-15-15:09`)))()},[f,h,Z,d,y,S,I,v,T,E,R,oe,c,r,s,i,ee,u,l,o,a,V,ae,Ae,Te,Me]}class an extends ge{constructor(e){super(),ve(this,e,on,rn,be,{},null,[-1,-1])}}function cn(n){let e,t,s,r;return e=new gs({props:{title:n[0],description:n[1],url:n[2],keywords:n[3]}}),s=new an({}),{c(){X(e.$$.fragment),t=P(),X(s.$$.fragment)},l(l){x(e.$$.fragment,l),t=C(l),x(s.$$.fragment,l)},m(l,c){K(e,l,c),j(l,t,c),K(s,l,c),r=!0},p:ne,i(l){r||(A(e.$$.fragment,l),A(s.$$.fragment,l),r=!0)},o(l){L(e.$$.fragment,l),L(s.$$.fragment,l),r=!1},d(l){Q(e,l),l&&m(t),Q(s,l)}}}function un(n,e,t){let{data:s}=e;vs();const{title:r,description:l,url:c,keywords:o}=yt;return bt("copy",yt),bt("data",s.data),n.$$set=a=>{"data"in a&&t(4,s=a.data)},[r,l,c,o,s]}class bn extends ge{constructor(e){super(),ve(this,e,un,cn,be,{data:4})}}export{bn as default};
