import{S as ve,i as ye,s as be,k as y,a as P,q as B,l as b,m as $,h as m,c as O,r as q,n as g,b as V,E as h,P as xt,F as ie,C as re,G as ze,H as We,I as Me,o as tt,Q as mt,u as Ae,K as gt,R as st,T as Bt,U as Qe,V as Qt,W as Zt,D as oe,g as Se,t as L,d as Te,f as A,X as es,Y as ts,e as He,Z as ss,w as vt,x as K,y as ee,z as X,_ as ns,$ as rs,A as Q,a0 as ls,a1 as yt,a2 as as,a3 as os,a4 as is,a5 as qt,a6 as cs,a7 as us,a8 as fs,a9 as hs,aa as bt,ab as $t}from"../../chunks/index-94a0d8c8.js";import{c as Ht,h as Ft,a as ps,s as ds,S as _s,o as Wt,v as ms,b as gs,M as vs,d as ys,e as bs}from"../../chunks/version-10a5c3ca.js";import{d as $s}from"../../chunks/transform-96ff9c66.js";import{p as ws}from"../../chunks/stores-ef5173ed.js";import{b as Gt}from"../../chunks/paths-eb28c9cb.js";import{w as Es,s as qe,I as nt,c as wt}from"../../chunks/copy-main-9ffbf2e7.js";import{w as Yt}from"../../chunks/index-128c871a.js";import{c as ks}from"../../chunks/copy-88b0669b.js";let Oe;const rt=()=>{if(Oe!==void 0)return Oe;try{const n=window.localStorage,e="__storage_test__";n.setItem(e,e),n.removeItem(e),Oe=!0}catch{Oe=!1}finally{return Oe}},Is=n=>{if(rt())try{localStorage.removeItem(n)}catch(e){console.log(e)}},Ss=(n,e)=>{if(rt())try{localStorage.setItem(n,JSON.stringify(e))}catch(t){console.log(t)}},Ts=n=>{if(rt())try{return JSON.parse(localStorage.getItem(n))}catch(e){console.log(e);return}},Ke={set:Ss,get:Ts,remove:Is};async function Ms({lat:n,lon:e,state:t}){try{const r=(await Ht(`${Gt}/assets/coordinates/${t}.csv?2023-03-16-06:20`)).map(l=>({...l,state:t,dist:Ft([+e,+n],[+l.longitude,+l.latitude])}));return r.sort((l,c)=>ps(l.dist,c.dist)),r.slice(0,5)}catch(s){console.log(s);return}}async function Ds({counties:n,location:e}){const{lon:t,lat:s}=e,l=n.features.map(({id:a,properties:o})=>({id:a,...o})).map(a=>({...a,dist:Math.round(Ft([+t,+s],a.centroid)/1e3)}));return l.sort((a,o)=>$s(a.dist,o.dist)),l.reverse(),l.map((a,o)=>({...a,index:o}))}const Cs={testing:"This is localhost testing data",city:"Lee",country:"US",hostname:"cpe-74-76-154-164.nycap.res.rr.com",ip:"74.76.154.164",loc:"42.3043,-73.2482",org:"AS11351 Charter Communications Inc",postal:"01238",region:"Massachusetts",timezone:"America/New_York"},Ps=4e3;async function Os(n){if(n)return Promise.resolve(Cs);try{return await(await fetch("https://ipinfo.io/json?token=6f0f9c88db028a")).json()}catch(e){throw new Error(e)}}function zs(n=!1){return new Promise((e,t)=>{const s=setTimeout(()=>t(new Error("timeout")),Ps);Os(n).then(r=>{clearTimeout(s),e(r)}).catch(t)})}async function As(n){var t;let e;try{const{country:s,region:r,loc:l}=await zs(n);if(s==="US"){const[c,a]=l.split(","),o=(t=ds.find(i=>i.state===r))==null?void 0:t.postal;e={lat:c,lon:a,state:o}}}catch(s){console.log(s)}finally{return e}}function Ls(n,e={}){let t;const s=l=>{const c=l[0].isIntersecting,a=c?"enter":"exit";if(n.dispatchEvent(new CustomEvent(a)),e.progress&&c){const i={ratio:l[0].intersectionRatio};n.dispatchEvent(new CustomEvent("progress",{detail:i}))}},r=({root:l,top:c,bottom:a})=>{const o=c?c*-1:0,i=a?a*-1:0,_=`${o}px 0px ${i}px 0px`,u={root:l,rootMargin:_};t&&t.disconnect(),t=new IntersectionObserver(s,u),t.observe(n)};return r(e),{update(l){r(l)},destroy(){t&&t.disconnect()}}}function Et(n,e,t){const s=n.slice();return s[8]=e[t],s}function kt(n,e,t){const s=n.slice();return s[11]=e[t].hed,s[3]=e[t].url,s[12]=e[t].image,s}function It(n){let e,t,s,r,l,c,a=n[11]+"",o,i,_;return{c(){e=y("div"),t=y("a"),s=y("img"),l=P(),c=y("span"),o=B(a),_=P(),this.h()},l(u){e=b(u,"DIV",{class:!0});var f=$(e);t=b(f,"A",{href:!0,class:!0});var d=$(t);s=b(d,"IMG",{src:!0,alt:!0}),l=O(d),c=b(d,"SPAN",{class:!0});var p=$(c);o=q(p,a),p.forEach(m),d.forEach(m),_=O(f),f.forEach(m),this.h()},h(){mt(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+n[12]+".jpg")||g(s,"src",r),g(s,"alt","thumbnail"),g(c,"class","svelte-13ez18p"),g(t,"href",i="https://pudding.cool/"+n[3]),g(t,"class","svelte-13ez18p"),g(e,"class","story svelte-13ez18p")},m(u,f){V(u,e,f),h(e,t),h(t,s),h(t,l),h(t,c),h(c,o),h(e,_)},p(u,f){f&1&&!mt(s.src,r="https://pudding.cool/common/assets/thumbnails/640/"+u[12]+".jpg")&&g(s,"src",r),f&1&&a!==(a=u[11]+"")&&Ae(o,a),f&1&&i!==(i="https://pudding.cool/"+u[3])&&g(t,"href",i)},d(u){u&&m(e)}}}function St(n){let e,t,s,r=n[8].name.toUpperCase()+"",l,c;return{c(){e=y("li"),t=y("a"),s=y("span"),l=B(r),c=P(),this.h()},l(a){e=b(a,"LI",{class:!0});var o=$(e);t=b(o,"A",{href:!0,class:!0});var i=$(t);s=b(i,"SPAN",{class:!0});var _=$(s);l=q(_,r),_.forEach(m),i.forEach(m),c=O(o),o.forEach(m),this.h()},h(){g(s,"class","svelte-13ez18p"),g(t,"href",n[8].url),g(t,"class","svelte-13ez18p"),g(e,"class","svelte-13ez18p")},m(a,o){V(a,e,o),h(e,t),h(t,s),h(s,l),h(e,c)},p:re,d(a){a&&m(e)}}}function Ns(n){let e,t,s,r,l,c,a,o,i,_,u,f,d,p,E,M=n[0],k=[];for(let S=0;S<M.length;S+=1)k[S]=It(kt(n,M,S));let I=n[2],T=[];for(let S=0;S<I.length;S+=1)T[S]=St(Et(n,I,S));return{c(){e=y("footer"),t=y("section");for(let S=0;S<k.length;S+=1)k[S].c();s=P(),r=y("section"),l=y("div"),c=P(),a=y("p"),o=y("a"),i=B("The Pudding"),_=B(`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),u=P(),f=y("section"),d=y("ul");for(let S=0;S<T.length;S+=1)T[S].c();this.h()},l(S){e=b(S,"FOOTER",{class:!0});var N=$(e);t=b(N,"SECTION",{class:!0});var w=$(t);for(let te=0;te<k.length;te+=1)k[te].l(w);w.forEach(m),s=O(N),r=b(N,"SECTION",{class:!0});var j=$(r);l=b(j,"DIV",{class:!0});var le=$(l);le.forEach(m),c=O(j),a=b(j,"P",{});var Y=$(a);o=b(Y,"A",{href:!0,class:!0});var ce=$(o);i=q(ce,"The Pudding"),ce.forEach(m),_=q(Y,`
			is a digital publication that explains ideas debated in culture with visual
			essays.`),Y.forEach(m),j.forEach(m),u=O(N),f=b(N,"SECTION",{class:!0});var Z=$(f);d=b(Z,"UL",{class:!0});var ae=$(d);for(let te=0;te<T.length;te+=1)T[te].l(ae);ae.forEach(m),Z.forEach(m),N.forEach(m),this.h()},h(){g(t,"class","stories svelte-13ez18p"),g(l,"class","wordmark svelte-13ez18p"),g(o,"href","https://pudding.cool"),g(o,"class","svelte-13ez18p"),g(r,"class","about svelte-13ez18p"),g(d,"class","svelte-13ez18p"),g(f,"class","links svelte-13ez18p"),g(e,"class","svelte-13ez18p")},m(S,N){V(S,e,N),h(e,t);for(let w=0;w<k.length;w+=1)k[w].m(t,null);h(e,s),h(e,r),h(r,l),l.innerHTML=Es,h(r,c),h(r,a),h(a,o),h(o,i),h(a,_),h(e,u),h(e,f),h(f,d);for(let w=0;w<T.length;w+=1)T[w].m(d,null);p||(E=[xt(Ls.call(null,e)),ie(e,"enter",n[4]),ie(e,"exit",n[5])],p=!0)},p(S,[N]){if(N&1){M=S[0];let w;for(w=0;w<M.length;w+=1){const j=kt(S,M,w);k[w]?k[w].p(j,N):(k[w]=It(j),k[w].c(),k[w].m(t,null))}for(;w<k.length;w+=1)k[w].d(1);k.length=M.length}if(N&4){I=S[2];let w;for(w=0;w<I.length;w+=1){const j=Et(S,I,w);T[w]?T[w].p(j,N):(T[w]=St(j),T[w].c(),T[w].m(d,null))}for(;w<T.length;w+=1)T[w].d(1);T.length=I.length}},i:re,o:re,d(S){S&&m(e),ze(k,S),ze(T,S),p=!1,We(E)}}}function js(n,e,t){let s;Me(n,qe,u=>t(1,s=u));let r,l=[];const a=`https://pudding.cool/assets/data/stories.json?v=${Date.now()}`,o=[{name:"about",url:"https://pudding.cool/about"},{name:"facebook",url:"https://facebook.com/pudding.viz/"},{name:"twitter",url:"https://twitter.com/puddingviz/"},{name:"instagram",url:"https://www.instagram.com/the.pudding"},{name:"patreon",url:"https://patreon.com/thepudding/"},{name:"privacy",url:"https://pudding.cool/privacy/"},{name:"newsletter",url:"https://thepuddingmail.substack.com"},{name:"rss",url:"https://pudding.cool/feed/index.xml"}];return tt(async()=>{r=window.location.href;const f=await(await fetch(a)).json();t(0,l=f.filter(d=>!r.includes(d.url)).slice(0,4))}),[l,s,o,a,()=>gt(qe,s=!1,s),()=>gt(qe,s=!0,s)]}class Us extends ve{constructor(e){super(),ye(this,e,js,Ns,be,{})}}function Jt(n){const e=n-1;return e*e*e+1}function Vs(n,{delay:e=0,duration:t=400,easing:s=st}={}){const r=+getComputedStyle(n).opacity;return{delay:e,duration:t,easing:s,css:l=>`opacity: ${l*r}`}}function Rs(n,{delay:e=0,duration:t=400,easing:s=Jt,x:r=0,y:l=0,opacity:c=0}={}){const a=getComputedStyle(n),o=+a.opacity,i=a.transform==="none"?"":a.transform,_=o*(1-c);return{delay:e,duration:t,easing:s,css:(u,f)=>`
			transform: ${i} translate(${(1-u)*r}px, ${(1-u)*l}px);
			opacity: ${o-_*f}`}}function xs(n,{from:e,to:t},s={}){const r=getComputedStyle(n),l=r.transform==="none"?"":r.transform,[c,a]=r.transformOrigin.split(" ").map(parseFloat),o=e.left+e.width*c/t.width-(t.left+c),i=e.top+e.height*a/t.height-(t.top+a),{delay:_=0,duration:u=d=>Math.sqrt(d)*120,easing:f=Jt}=s;return{delay:_,duration:Bt(u)?u(Math.sqrt(o*o+i*i)):u,easing:f,css:(d,p)=>{const E=p*o,M=p*i,k=d+p*e.width/t.width,I=d+p*e.height/t.height;return`transform: ${l} translate(${E}px, ${M}px) scale(${k}, ${I});`}}}const Bs={duration:4e3,initial:1,next:0,pausable:!1,dismissable:!0,reversed:!1,intro:{x:256}},qs=()=>{const{subscribe:n,update:e}=Yt([]),t={};let s=0;function r(i){return i instanceof Object}function l(i="default",_={}){return t[i]=_,t}function c(i,_){const u={target:"default",...r(i)?i:{..._,msg:i}},f=t[u.target]||{},d={...Bs,...f,...u,theme:{...f.theme,...u.theme},classes:[...f.classes||[],...u.classes||[]],id:++s};return e(p=>d.reversed?[...p,d]:[d,...p]),s}function a(i){e(_=>{if(!_.length||i===0)return[];if(typeof i=="function")return _.filter(f=>i(f));if(r(i))return _.filter(f=>f.target!==i.target);const u=i||Math.max(..._.map(f=>f.id));return _.filter(f=>f.id!==u)})}function o(i,_){const u=r(i)?i:{..._,id:i};e(f=>{const d=f.findIndex(p=>p.id===u.id);return d>-1&&(f[d]={...f[d],...u}),f})}return{subscribe:n,push:c,pop:a,set:o,_init:l}},Fe=qs();function Tt(n){return Object.prototype.toString.call(n)==="[object Date]"}function Ze(n,e){if(n===e||n!==n)return()=>n;const t=typeof n;if(t!==typeof e||Array.isArray(n)!==Array.isArray(e))throw new Error("Cannot interpolate values of different type");if(Array.isArray(n)){const s=e.map((r,l)=>Ze(n[l],r));return r=>s.map(l=>l(r))}if(t==="object"){if(!n||!e)throw new Error("Object cannot be null");if(Tt(n)&&Tt(e)){n=n.getTime(),e=e.getTime();const l=e-n;return c=>new Date(n+c*l)}const s=Object.keys(e),r={};return s.forEach(l=>{r[l]=Ze(n[l],e[l])}),l=>{const c={};return s.forEach(a=>{c[a]=r[a](l)}),c}}if(t==="number"){const s=e-n;return r=>n+r*s}throw new Error(`Cannot interpolate ${t} values`)}function Hs(n,e={}){const t=Yt(n);let s,r=n;function l(c,a){if(n==null)return t.set(n=c),Promise.resolve();r=c;let o=s,i=!1,{delay:_=0,duration:u=400,easing:f=st,interpolate:d=Ze}=Qe(Qe({},e),a);if(u===0)return o&&(o.abort(),o=null),t.set(n=r),Promise.resolve();const p=Qt()+_;let E;return s=Zt(M=>{if(M<p)return!0;i||(E=d(n,c),typeof u=="function"&&(u=u(n,c)),i=!0),o&&(o.abort(),o=null);const k=M-p;return k>u?(t.set(n=c),!1):(t.set(n=E(f(k/u))),!0)}),s.promise}return{set:l,update:(c,a)=>l(c(r,n),a),subscribe:t.subscribe}}function Fs(n){let e,t=n[0].msg+"",s;return{c(){e=new ts(!1),s=He(),this.h()},l(r){e=ss(r,!1),s=He(),this.h()},h(){e.a=s},m(r,l){e.m(t,r,l),V(r,s,l)},p(r,l){l&1&&t!==(t=r[0].msg+"")&&e.p(t)},i:re,o:re,d(r){r&&m(s),r&&e.d()}}}function Ws(n){let e,t,s;const r=[n[2]];var l=n[0].component.src;function c(a){let o={};for(let i=0;i<r.length;i+=1)o=Qe(o,r[i]);return{props:o}}return l&&(e=vt(l,c())),{c(){e&&K(e.$$.fragment),t=He()},l(a){e&&ee(e.$$.fragment,a),t=He()},m(a,o){e&&X(e,a,o),V(a,t,o),s=!0},p(a,o){const i=o&4?ns(r,[rs(a[2])]):{};if(l!==(l=a[0].component.src)){if(e){Se();const _=e;L(_.$$.fragment,1,0,()=>{Q(_,1)}),Te()}l?(e=vt(l,c()),K(e.$$.fragment),A(e.$$.fragment,1),X(e,t.parentNode,t)):e=null}else l&&e.$set(i)},i(a){s||(e&&A(e.$$.fragment,a),s=!0)},o(a){e&&L(e.$$.fragment,a),s=!1},d(a){a&&m(t),e&&Q(e,a)}}}function Mt(n){let e,t,s;return{c(){e=y("div"),this.h()},l(r){e=b(r,"DIV",{class:!0,role:!0,tabindex:!0}),$(e).forEach(m),this.h()},h(){g(e,"class","_toastBtn pe svelte-6p19b0"),g(e,"role","button"),g(e,"tabindex","0")},m(r,l){V(r,e,l),t||(s=[ie(e,"click",n[4]),ie(e,"keydown",n[8])],t=!0)},p:re,d(r){r&&m(e),t=!1,We(s)}}}function Gs(n){let e,t,s,r,l,c,a,o,i,_;const u=[Ws,Fs],f=[];function d(E,M){return E[0].component?0:1}s=d(n),r=f[s]=u[s](n);let p=n[0].dismissable&&Mt(n);return{c(){e=y("div"),t=y("div"),r.c(),l=P(),p&&p.c(),c=P(),a=y("progress"),this.h()},l(E){e=b(E,"DIV",{class:!0});var M=$(e);t=b(M,"DIV",{role:!0,class:!0});var k=$(t);r.l(k),k.forEach(m),l=O(M),p&&p.l(M),c=O(M),a=b(M,"PROGRESS",{class:!0}),$(a).forEach(m),M.forEach(m),this.h()},h(){g(t,"role","status"),g(t,"class","_toastMsg svelte-6p19b0"),oe(t,"pe",n[0].component),g(a,"class","_toastBar svelte-6p19b0"),a.value=n[1],g(e,"class","_toastItem svelte-6p19b0"),oe(e,"pe",n[0].pausable)},m(E,M){V(E,e,M),h(e,t),f[s].m(t,null),h(e,l),p&&p.m(e,null),h(e,c),h(e,a),o=!0,i||(_=[ie(e,"mouseenter",n[9]),ie(e,"mouseleave",n[6])],i=!0)},p(E,[M]){let k=s;s=d(E),s===k?f[s].p(E,M):(Se(),L(f[k],1,1,()=>{f[k]=null}),Te(),r=f[s],r?r.p(E,M):(r=f[s]=u[s](E),r.c()),A(r,1),r.m(t,null)),(!o||M&1)&&oe(t,"pe",E[0].component),E[0].dismissable?p?p.p(E,M):(p=Mt(E),p.c(),p.m(e,c)):p&&(p.d(1),p=null),(!o||M&2)&&(a.value=E[1]),(!o||M&1)&&oe(e,"pe",E[0].pausable)},i(E){o||(A(r),o=!0)},o(E){L(r),o=!1},d(E){E&&m(e),f[s].d(),p&&p.d(),i=!1,We(_)}}}function Xe(n,e="undefined"){return typeof n===e}function Ys(n,e,t){let s,{item:r}=e,l=r.initial,c=l,a=!1,o={},i;const _=Hs(r.initial,{duration:r.duration,easing:st});Me(n,_,I=>t(1,s=I));function u(){Fe.pop(r.id)}function f(){(s===1||s===0)&&u()}function d(){!a&&s!==l&&(_.set(s,{duration:0}),a=!0)}function p(){if(a){const I=r.duration,T=I-I*((s-c)/(l-c));_.set(l,{duration:T}).then(f),a=!1}}function E(I=document){if(Xe(I.hidden))return;const T=()=>I.hidden?d():p(),S="visibilitychange";I.addEventListener(S,T),i=()=>I.removeEventListener(S,T),T()}tt(E),es(()=>{Xe(r.onpop,"function")&&r.onpop(r.id),i&&i()});const M=I=>{I instanceof KeyboardEvent&&["Enter"," "].includes(I.key)&&u()},k=()=>{r.pausable&&d()};return n.$$set=I=>{"item"in I&&t(0,r=I.item)},n.$$.update=()=>{if(n.$$.dirty&1&&(Xe(r.progress)||t(0,r.next=r.progress,r)),n.$$.dirty&131&&l!==r.next&&(t(7,l=r.next),c=s,a=!1,_.set(l).then(f)),n.$$.dirty&1&&r.component){const{props:I={},sendIdTo:T}=r.component;t(2,o={...I,...T&&{[T]:r.id}})}},[r,s,o,_,u,d,p,l,M,k]}class Js extends ve{constructor(e){super(),ye(this,e,Ys,Gs,be,{item:0})}}function Dt(n,e,t){const s=n.slice();return s[4]=e[t],s}function Ct(n,e){let t,s,r,l,c,a,o,i,_=re,u;return s=new Js({props:{item:e[4]}}),{key:n,first:null,c(){t=y("li"),K(s.$$.fragment),r=P(),this.h()},l(f){t=b(f,"LI",{class:!0,style:!0});var d=$(t);ee(s.$$.fragment,d),r=O(d),d.forEach(m),this.h()},h(){g(t,"class",l=yt(e[4].classes.join(" "))+" svelte-1u812xz"),g(t,"style",c=Pt(e[4].theme)),this.first=t},m(f,d){V(f,t,d),X(s,t,null),h(t,r),u=!0},p(f,d){e=f;const p={};d&1&&(p.item=e[4]),s.$set(p),(!u||d&1&&l!==(l=yt(e[4].classes.join(" "))+" svelte-1u812xz"))&&g(t,"class",l),(!u||d&1&&c!==(c=Pt(e[4].theme)))&&g(t,"style",c)},r(){i=t.getBoundingClientRect()},f(){as(t),_(),os(t,i)},a(){_(),_=is(t,i,xs,{duration:200})},i(f){u||(A(s.$$.fragment,f),qt(()=>{o&&o.end(1),a=cs(t,Rs,e[4].intro),a.start()}),u=!0)},o(f){L(s.$$.fragment,f),a&&a.invalidate(),o=us(t,Vs,{}),u=!1},d(f){f&&m(t),Q(s),f&&o&&o.end()}}}function Ks(n){let e,t=[],s=new Map,r,l=n[0];const c=a=>a[4].id;for(let a=0;a<l.length;a+=1){let o=Dt(n,l,a),i=c(o);s.set(i,t[a]=Ct(i,o))}return{c(){e=y("ul");for(let a=0;a<t.length;a+=1)t[a].c();this.h()},l(a){e=b(a,"UL",{class:!0});var o=$(e);for(let i=0;i<t.length;i+=1)t[i].l(o);o.forEach(m),this.h()},h(){g(e,"class","_toastContainer svelte-1u812xz")},m(a,o){V(a,e,o);for(let i=0;i<t.length;i+=1)t[i].m(e,null);r=!0},p(a,[o]){if(o&1){l=a[0],Se();for(let i=0;i<t.length;i+=1)t[i].r();t=ls(t,o,c,1,a,l,s,e,fs,Ct,null,Dt);for(let i=0;i<t.length;i+=1)t[i].a();Te()}},i(a){if(!r){for(let o=0;o<l.length;o+=1)A(t[o]);r=!0}},o(a){for(let o=0;o<t.length;o+=1)L(t[o]);r=!1},d(a){a&&m(e);for(let o=0;o<t.length;o+=1)t[o].d()}}}function Pt(n){return Object.keys(n).reduce((e,t)=>`${e}${t}:${n[t]};`,"")}function Xs(n,e,t){let s;Me(n,Fe,a=>t(3,s=a));let{options:r={}}=e,{target:l="default"}=e,c=[];return n.$$set=a=>{"options"in a&&t(1,r=a.options),"target"in a&&t(2,l=a.target)},n.$$.update=()=>{n.$$.dirty&6&&Fe._init(l,r),n.$$.dirty&12&&t(0,c=s.filter(a=>a.target===l))},[c,r,l,s]}class Qs extends ve{constructor(e){super(),ye(this,e,Xs,Ks,be,{options:1,target:2})}}function Zs(n){let e,t,s,r,l,c,a,o,i,_;return e=new Qs({props:{options:n[2]}}),c=new nt({props:{name:"forward",strokeWidth:"3px"}}),{c(){K(e.$$.fragment),t=P(),s=y("div"),r=y("button"),l=B("Share map "),K(c.$$.fragment),this.h()},l(u){ee(e.$$.fragment,u),t=O(u),s=b(u,"DIV",{class:!0});var f=$(s);r=b(f,"BUTTON",{class:!0});var d=$(r);l=q(d,"Share map "),ee(c.$$.fragment,d),d.forEach(m),f.forEach(m),this.h()},h(){g(r,"class","svelte-afq10l"),g(s,"class","share svelte-afq10l"),oe(s,"visible",n[1])},m(u,f){X(e,u,f),V(u,t,f),V(u,s,f),h(s,r),h(r,l),X(c,r,null),o=!0,i||(_=[xt(a=ks.call(null,r,n[0])),ie(r,"svelte-copy",n[3])],i=!0)},p(u,[f]){a&&Bt(a.update)&&f&1&&a.update.call(null,u[0]),(!o||f&2)&&oe(s,"visible",u[1])},i(u){o||(A(e.$$.fragment,u),A(c.$$.fragment,u),o=!0)},o(u){L(e.$$.fragment,u),L(c.$$.fragment,u),o=!1},d(u){Q(e,u),u&&m(t),u&&m(s),Q(c),i=!1,We(_)}}}function en(n,e,t){let s;Me(n,qe,a=>t(1,s=a));let{url:r}=e;const l={duration:1500,dismissable:!1,intro:{y:32}};function c(){Fe.push("Link copied!")}return n.$$set=a=>{"url"in a&&t(0,r=a.url)},[r,s,l,c]}class tn extends ve{constructor(e){super(),ye(this,e,en,Zs,be,{url:0})}}function sn(n){let e,t,s,r,l,c;return l=new nt({props:{stroke:"white",name:"dollar-sign"}}),{c(){e=y("a"),t=B(n[0]),s=P(),r=y("span"),K(l.$$.fragment),this.h()},l(a){e=b(a,"A",{class:!0,href:!0,target:!0,rel:!0,role:!0});var o=$(e);t=q(o,n[0]),s=O(o),r=b(o,"SPAN",{class:!0});var i=$(r);ee(l.$$.fragment,i),i.forEach(m),o.forEach(m),this.h()},h(){g(r,"class","svelte-423hsz"),g(e,"class","tip-button svelte-423hsz"),g(e,"href",n[1]),g(e,"target","_blank"),g(e,"rel","noreferrer"),g(e,"role","button")},m(a,o){V(a,e,o),h(e,t),h(e,s),h(e,r),X(l,r,null),c=!0},p(a,[o]){(!c||o&1)&&Ae(t,a[0]),(!c||o&2)&&g(e,"href",a[1])},i(a){c||(A(l.$$.fragment,a),c=!0)},o(a){L(l.$$.fragment,a),c=!1},d(a){a&&m(e),Q(l)}}}function nn(n,e,t){let{text:s="Tip"}=e,{href:r}=e;return n.$$set=l=>{"text"in l&&t(0,s=l.text),"href"in l&&t(1,r=l.href)},[s,r]}class rn extends ve{constructor(e){super(),ye(this,e,nn,sn,be,{text:0,href:1})}}const et=[{name:"Portland",phoneme:"4010"},{name:"Paris",phoneme:"3785"},{name:"Pluto",phoneme:"3968"},{name:"Indiana",phoneme:"2418"},{name:"Davie",phoneme:"1263"}];function Ot(n,e,t){const s=n.slice();return s[30]=e[t].value,s}function zt(n,e,t){const s=n.slice();s[33]=e[t];const r=s[33];return s[34]=r.name,s}function At(n,e,t){const s=n.slice();s[33]=e[t];const r=s[33];return s[34]=r.name,s[37]=r.state,s}function Lt(n){let e,t;return e=new nt({props:{name:"map-pin",strokeWidth:"3px"}}),{c(){K(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){X(e,s,r),t=!0},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function Nt(n){let e,t,s=n[15].locate+"",r,l,c,a=n[4],o=[];for(let i=0;i<a.length;i+=1)o[i]=jt(At(n,a,i));return{c(){e=y("div"),t=y("p"),r=B(s),l=P(),c=y("ul");for(let i=0;i<o.length;i+=1)o[i].c();this.h()},l(i){e=b(i,"DIV",{class:!0});var _=$(e);t=b(_,"P",{class:!0});var u=$(t);r=q(u,s),u.forEach(m),l=O(_),c=b(_,"UL",{class:!0});var f=$(c);for(let d=0;d<o.length;d+=1)o[d].l(f);f.forEach(m),_.forEach(m),this.h()},h(){g(t,"class","svelte-asyxxf"),g(c,"class","svelte-asyxxf"),g(e,"class","locate svelte-asyxxf")},m(i,_){V(i,e,_),h(e,t),h(t,r),h(e,l),h(e,c);for(let u=0;u<o.length;u+=1)o[u].m(c,null)},p(i,_){if(_[0]&65552){a=i[4];let u;for(u=0;u<a.length;u+=1){const f=At(i,a,u);o[u]?o[u].p(f,_):(o[u]=jt(f),o[u].c(),o[u].m(c,null))}for(;u<o.length;u+=1)o[u].d(1);o.length=a.length}},d(i){i&&m(e),ze(o,i)}}}function jt(n){let e,t,s=n[34]+"",r,l,c=n[37]+"",a,o,i,_;function u(){return n[22](n[33])}return{c(){e=y("li"),t=y("button"),r=B(s),l=B(", "),a=B(c),o=P(),this.h()},l(f){e=b(f,"LI",{class:!0});var d=$(e);t=b(d,"BUTTON",{class:!0});var p=$(t);r=q(p,s),l=q(p,", "),a=q(p,c),p.forEach(m),o=O(d),d.forEach(m),this.h()},h(){g(t,"class","svelte-asyxxf"),g(e,"class","svelte-asyxxf")},m(f,d){V(f,e,d),h(e,t),h(t,r),h(t,l),h(t,a),h(e,o),i||(_=ie(t,"click",u),i=!0)},p(f,d){n=f,d[0]&16&&s!==(s=n[34]+"")&&Ae(r,s),d[0]&16&&c!==(c=n[37]+"")&&Ae(a,c)},d(f){f&&m(e),i=!1,_()}}}function Ut(n){let e,t,s=n[34]+"",r,l,c,a;function o(){return n[23](n[33])}return{c(){e=y("li"),t=y("button"),r=B(s),l=P(),this.h()},l(i){e=b(i,"LI",{class:!0});var _=$(e);t=b(_,"BUTTON",{class:!0});var u=$(t);r=q(u,s),u.forEach(m),l=O(_),_.forEach(m),this.h()},h(){g(t,"class","svelte-asyxxf"),g(e,"class","svelte-asyxxf")},m(i,_){V(i,e,_),h(e,t),h(t,r),h(e,l),c||(a=ie(t,"click",o),c=!0)},p(i,_){n=i},d(i){i&&m(e),c=!1,a()}}}function ln(n){let e,t;return{c(){e=y("p"),t=B("loading..."),this.h()},l(s){e=b(s,"P",{class:!0});var r=$(e);t=q(r,"loading..."),r.forEach(m),this.h()},h(){g(e,"class","loading svelte-asyxxf")},m(s,r){V(s,e,r),h(e,t)},p:re,i:re,o:re,d(s){s&&m(e)}}}function an(n){let e,t;return e=new vs({props:{story:!0,counties:n[7],states:n[8],countiesMesh:n[9],statesMesh:n[10],nationMesh:n[11],placeData:n[3],placeName:n[0],location:n[1],countiesByDist:n[5]}}),{c(){K(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){X(e,s,r),t=!0},p(s,r){const l={};r[0]&128&&(l.counties=s[7]),r[0]&256&&(l.states=s[8]),r[0]&512&&(l.countiesMesh=s[9]),r[0]&1024&&(l.statesMesh=s[10]),r[0]&2048&&(l.nationMesh=s[11]),r[0]&8&&(l.placeData=s[3]),r[0]&1&&(l.placeName=s[0]),r[0]&2&&(l.location=s[1]),r[0]&32&&(l.countiesByDist=s[5]),e.$set(l)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function Vt(n){let e,t;return e=new tn({props:{url:n[14]}}),{c(){K(e.$$.fragment)},l(s){ee(e.$$.fragment,s)},m(s,r){X(e,s,r),t=!0},p(s,r){const l={};r[0]&16384&&(l.url=s[14]),e.$set(l)},i(s){t||(A(e.$$.fragment,s),t=!0)},o(s){L(e.$$.fragment,s),t=!1},d(s){Q(e,s)}}}function Rt(n){let e,t=n[30]+"";return{c(){e=y("p"),this.h()},l(s){e=b(s,"P",{class:!0});var r=$(e);r.forEach(m),this.h()},h(){g(e,"class","svelte-asyxxf")},m(s,r){V(s,e,r),e.innerHTML=t},p:re,d(s){s&&m(e)}}}function on(n){var ct;let e,t,s,r,l,c=n[15].title+"",a,o,i,_=n[15].hed+"",u,f,d,p,E,M,k,I,T,S=n[15].discoverySummary+"",N,w,j,le,Y,ce,Z,ae,te=n[15].classic+"",De,Ce,D,ue,x,J,se,Le,lt,Ge,ne,Ne,$e,Kt=n[15].outro+"",Ye,we,pe,je,de,_e,Je,at;E=new _s({props:{options:Wt}}),E.$on("change",n[21]);let R=((ct=n[1])==null?void 0:ct.state)&&Lt(),H=n[4]&&n[4].length&&Nt(n),Ee=et,F=[];for(let v=0;v<Ee.length;v+=1)F[v]=Ut(zt(n,Ee,v));const ot=[an,ln],fe=[];function it(v,z){return v[3]?0:1}J=it(n),se=fe[J]=ot[J](n);let U=n[14]&&Vt(n),ke=n[15].info,W=[];for(let v=0;v<ke.length;v+=1)W[v]=Rt(Ot(n,ke,v));return pe=new rn({props:{text:"Send a tip to The Pudding",href:""}}),de=new Us({}),{c(){e=y("article"),t=y("section"),s=y("div"),r=y("p"),l=y("strong"),a=B(c),o=P(),i=y("h1"),u=B(_),f=P(),d=y("div"),p=y("div"),K(E.$$.fragment),M=P(),k=y("div"),I=y("details"),T=y("summary"),N=B(S),w=P(),j=B(n[13]),R&&R.c(),le=P(),Y=y("div"),H&&H.c(),ce=P(),Z=y("div"),ae=y("p"),De=B(te),Ce=P(),D=y("ul");for(let v=0;v<F.length;v+=1)F[v].c();ue=P(),x=y("section"),se.c(),Le=P(),U&&U.c(),Ge=P(),ne=y("section");for(let v=0;v<W.length;v+=1)W[v].c();Ne=P(),$e=y("p"),Ye=P(),we=y("p"),K(pe.$$.fragment),je=P(),K(de.$$.fragment),this.h()},l(v){e=b(v,"ARTICLE",{class:!0});var z=$(e);t=b(z,"SECTION",{id:!0,class:!0});var G=$(t);s=b(G,"DIV",{class:!0});var me=$(s);r=b(me,"P",{class:!0});var C=$(r);l=b(C,"STRONG",{});var he=$(l);a=q(he,c),he.forEach(m),C.forEach(m),o=O(me),i=b(me,"H1",{class:!0});var ut=$(i);u=q(ut,_),ut.forEach(m),me.forEach(m),f=O(G),d=b(G,"DIV",{class:!0});var Ue=$(d);p=b(Ue,"DIV",{class:!0});var ft=$(p);ee(E.$$.fragment,ft),ft.forEach(m),M=O(Ue),k=b(Ue,"DIV",{class:!0});var ht=$(k);I=b(ht,"DETAILS",{});var Ve=$(I);T=b(Ve,"SUMMARY",{});var Pe=$(T);N=q(Pe,S),w=O(Pe),j=q(Pe,n[13]),R&&R.l(Pe),Pe.forEach(m),le=O(Ve),Y=b(Ve,"DIV",{class:!0});var Re=$(Y);H&&H.l(Re),ce=O(Re),Z=b(Re,"DIV",{class:!0});var xe=$(Z);ae=b(xe,"P",{class:!0});var pt=$(ae);De=q(pt,te),pt.forEach(m),Ce=O(xe),D=b(xe,"UL",{class:!0});var dt=$(D);for(let ge=0;ge<F.length;ge+=1)F[ge].l(dt);dt.forEach(m),xe.forEach(m),Re.forEach(m),Ve.forEach(m),ht.forEach(m),Ue.forEach(m),G.forEach(m),ue=O(z),x=b(z,"SECTION",{id:!0,class:!0});var Be=$(x);se.l(Be),Le=O(Be),U&&U.l(Be),Be.forEach(m),Ge=O(z),ne=b(z,"SECTION",{id:!0,class:!0});var Ie=$(ne);for(let ge=0;ge<W.length;ge+=1)W[ge].l(Ie);Ne=O(Ie),$e=b(Ie,"P",{class:!0});var Xt=$($e);Xt.forEach(m),Ye=O(Ie),we=b(Ie,"P",{class:!0});var _t=$(we);ee(pe.$$.fragment,_t),_t.forEach(m),Ie.forEach(m),z.forEach(m),je=O(v),ee(de.$$.fragment,v),this.h()},h(){g(r,"class","overline svelte-asyxxf"),g(i,"class","hed svelte-asyxxf"),g(s,"class","hero"),g(p,"class","select svelte-asyxxf"),g(ae,"class","svelte-asyxxf"),g(D,"class","svelte-asyxxf"),g(Z,"class","classic svelte-asyxxf"),g(Y,"class","inner svelte-asyxxf"),g(k,"class","discover"),g(d,"class","ui svelte-asyxxf"),oe(d,"visible",!!n[3]),g(t,"id","intro"),g(t,"class","svelte-asyxxf"),g(x,"id","interactive"),g(x,"class","svelte-asyxxf"),qt(()=>n[25].call(x)),oe(x,"shrink",n[12]),g($e,"class","svelte-asyxxf"),g(we,"class","svelte-asyxxf"),g(ne,"id","outro"),g(ne,"class","svelte-asyxxf"),g(e,"class","svelte-asyxxf")},m(v,z){V(v,e,z),h(e,t),h(t,s),h(s,r),h(r,l),h(l,a),h(s,o),h(s,i),h(i,u),h(t,f),h(t,d),h(d,p),X(E,p,null),h(d,M),h(d,k),h(k,I),h(I,T),h(T,N),h(T,w),h(T,j),R&&R.m(T,null),h(I,le),h(I,Y),H&&H.m(Y,null),h(Y,ce),h(Y,Z),h(Z,ae),h(ae,De),h(Z,Ce),h(Z,D);for(let G=0;G<F.length;G+=1)F[G].m(D,null);I.open=n[6],h(e,ue),h(e,x),fe[J].m(x,null),h(x,Le),U&&U.m(x,null),lt=hs(x,n[25].bind(x)),h(e,Ge),h(e,ne);for(let G=0;G<W.length;G+=1)W[G].m(ne,null);h(ne,Ne),h(ne,$e),$e.innerHTML=Kt,h(ne,Ye),h(ne,we),X(pe,we,null),V(v,je,z),X(de,v,z),_e=!0,Je||(at=ie(I,"toggle",n[24]),Je=!0)},p(v,z){var me;if((!_e||z[0]&8192)&&Ae(j,v[13]),(me=v[1])!=null&&me.state?R?z[0]&2&&A(R,1):(R=Lt(),R.c(),A(R,1),R.m(T,null)):R&&(Se(),L(R,1,1,()=>{R=null}),Te()),v[4]&&v[4].length?H?H.p(v,z):(H=Nt(v),H.c(),H.m(Y,ce)):H&&(H.d(1),H=null),z[0]&65536){Ee=et;let C;for(C=0;C<Ee.length;C+=1){const he=zt(v,Ee,C);F[C]?F[C].p(he,z):(F[C]=Ut(he),F[C].c(),F[C].m(D,null))}for(;C<F.length;C+=1)F[C].d(1);F.length=Ee.length}z[0]&64&&(I.open=v[6]),(!_e||z[0]&8)&&oe(d,"visible",!!v[3]);let G=J;if(J=it(v),J===G?fe[J].p(v,z):(Se(),L(fe[G],1,1,()=>{fe[G]=null}),Te(),se=fe[J],se?se.p(v,z):(se=fe[J]=ot[J](v),se.c()),A(se,1),se.m(x,Le)),v[14]?U?(U.p(v,z),z[0]&16384&&A(U,1)):(U=Vt(v),U.c(),A(U,1),U.m(x,null)):U&&(Se(),L(U,1,1,()=>{U=null}),Te()),(!_e||z[0]&4096)&&oe(x,"shrink",v[12]),z[0]&32768){ke=v[15].info;let C;for(C=0;C<ke.length;C+=1){const he=Ot(v,ke,C);W[C]?W[C].p(he,z):(W[C]=Rt(he),W[C].c(),W[C].m(ne,Ne))}for(;C<W.length;C+=1)W[C].d(1);W.length=ke.length}},i(v){_e||(A(E.$$.fragment,v),A(R),A(se),A(U),A(pe.$$.fragment,v),A(de.$$.fragment,v),_e=!0)},o(v){L(E.$$.fragment,v),L(R),L(se),L(U),L(pe.$$.fragment,v),L(de.$$.fragment,v),_e=!1},d(v){v&&m(e),Q(E),R&&R.d(),H&&H.d(),ze(F,v),fe[J].d(),U&&U.d(),lt(),ze(W,v),Q(pe),v&&m(je),Q(de,v),Je=!1,at()}}}const cn=!0;function un(n,e,t){let s,r,l,c,a,o;Me(n,ms,D=>t(19,a=D)),Me(n,ws,D=>t(20,o=D));const i=bt("copy");bt("data");const _=975/610;let u,f,d,p,E,M,k=!1,I,T,S,N,w,j;function le({name:D,phoneme:ue}){t(6,k=!1),t(17,u=ue),t(0,f=D)}function Y(){const D=o.url.search.split("place=")[1],ue=decodeURIComponent(D);return window.history.replaceState({},"",`${window.location.pathname}`),Wt.find(J=>J.name===ue)||et[0]}async function ce(){Ke.remove("pudding_samename");const D=Ke.get("pudding_samename");t(1,p=D||await As(cn)||{}),!D&&(p!=null&&p.state)&&Ke.set("pudding_samename",p),p!=null&&p.state&&(t(4,E=await Ms(p)),t(5,M=await Ds({counties:I,location:p}))),t(1,p.lat=+(p==null?void 0:p.lat),p),t(1,p.lon=+(p==null?void 0:p.lon),p)}tt(async()=>{try{const D=await gs();t(7,I=D.counties),t(8,T=D.states),t(9,S=D.countiesMesh),t(10,N=D.statesMesh),t(11,w=D.nationMesh);const ue=Y();le(ue),await ce()}catch(D){console.log(D)}});const Z=({detail:D})=>le(D),ae=D=>le(D),te=D=>le(D);function De(){k=this.open,t(6,k)}function Ce(){j=this.clientWidth,t(2,j)}return n.$$.update=()=>{n.$$.dirty[0]&1048577&&t(14,s=`${o.url}?place=${encodeURIComponent(f)}`),n.$$.dirty[0]&2&&t(13,r=p!=null&&p.state?"places near you":"curated places."),n.$$.dirty[0]&4&&t(18,l=j/_*1.25),n.$$.dirty[0]&786432&&t(12,c=l>a.height),n.$$.dirty[0]&131072&&u&&(async()=>t(3,d=await Ht(`${Gt}/assets/places/${u}.csv?2023-03-16-06:20`)))()},[f,p,j,d,E,M,k,I,T,S,N,w,c,r,s,i,le,u,l,a,o,Z,ae,te,De,Ce]}class fn extends ve{constructor(e){super(),ye(this,e,un,on,be,{},null,[-1,-1])}}function hn(n){let e,t,s,r;return e=new ys({props:{title:n[0],description:n[1],url:n[2],keywords:n[3]}}),s=new fn({}),{c(){K(e.$$.fragment),t=P(),K(s.$$.fragment)},l(l){ee(e.$$.fragment,l),t=O(l),ee(s.$$.fragment,l)},m(l,c){X(e,l,c),V(l,t,c),X(s,l,c),r=!0},p:re,i(l){r||(A(e.$$.fragment,l),A(s.$$.fragment,l),r=!0)},o(l){L(e.$$.fragment,l),L(s.$$.fragment,l),r=!1},d(l){Q(e,l),l&&m(t),Q(s,l)}}}function pn(n,e,t){let{data:s}=e;bs();const{title:r,description:l,url:c,keywords:a}=wt;return $t("copy",wt),$t("data",s.data),n.$$set=o=>{"data"in o&&t(4,s=o.data)},[r,l,c,a,s]}class wn extends ve{constructor(e){super(),ye(this,e,pn,hn,be,{data:4})}}export{wn as default};
